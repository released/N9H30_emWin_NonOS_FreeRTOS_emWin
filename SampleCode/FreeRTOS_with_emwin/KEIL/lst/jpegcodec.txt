; generated by Component: ARM Compiler 5.06 update 6 (build 750) Tool: ArmCC [4d3637]
; commandline ArmCC [--list --split_sections --debug -c --asm --interleave -o.\obj\jpegcodec.o --asm_dir=.\lst\ --list_dir=.\lst\ --depend=.\obj\jpegcodec.d --cpu=ARM926EJ-S --apcs=interwork --diag_suppress=9931 -I..\..\..\Driver\Source -I..\..\..\Driver\Include -I..\..\..\ThirdParty\FATFS\src -I..\..\..\ThirdParty\emWin\Config -I..\..\..\ThirdParty\emWin\Include -I..\..\FreeRTOS_with_emwin -I..\tslib -I..\Application -I..\..\..\ThirdParty\FreeRTOSV9.0.0\FreeRTOS\Source\portable\RVDS\ARM9_N9H30 -I..\..\..\ThirdParty\FreeRTOSV9.0.0\FreeRTOS\Source\include -I..\..\..\ThirdParty\FreeRTOSV9.0.0\FreeRTOS\Demo\Common\include -IC:\Keil_v5\ARM\RV31\INC -IC:\Keil_v5\ARM\CMSIS\Include -IC:\Keil_v5\ARM\INC\Toshiba -D__UVISION_VERSION=526 -D_PANEL_E50A2V1_16BPP_ --omf_browse=.\obj\jpegcodec.crf ..\..\..\Driver\Source\jpegcodec.c]
                          ARM

                          AREA ||i.jpegAdjustQTAB||, CODE, READONLY, ALIGN=2

                  jpegAdjustQTAB PROC
;;;336    
;;;337    INT jpegAdjustQTAB(UINT8 u8Mode, UINT8 u8Qadjust, UINT8 u8Qscaling)
000000  e3500000          CMP      r0,#0
;;;338    {
;;;339        UINT32 u32Addr;
;;;340        if(u8Mode == JPEG_ENC_PRIMARY)
;;;341            u32Addr = REG_JPRIQC;
000004  059f0028          LDREQ    r0,|L1.52|
000008  0a000003          BEQ      |L1.28|
;;;342        else if(u8Mode == JPEG_ENC_THUMBNAIL)
00000c  e3500001          CMP      r0,#1
;;;343            u32Addr = REG_JTHBQC;
000010  059f0020          LDREQ    r0,|L1.56|
;;;344        else
;;;345            return E_JPEG_INVALID_PARAM;
000014  13a00002          MOVNE    r0,#2
;;;346    
;;;347        outp32(u32Addr,((u8Qadjust & 0xF) << 4 )| (u8Qscaling & 0xF));
;;;348        return E_SUCCESS;
;;;349    }
000018  112fff1e          BXNE     lr
                  |L1.28|
00001c  e202200f          AND      r2,r2,#0xf            ;347
000020  e201100f          AND      r1,r1,#0xf            ;347
000024  e1821201          ORR      r1,r2,r1,LSL #4       ;347
000028  e5801000          STR      r1,[r0,#0]            ;347
00002c  e3a00001          MOV      r0,#1                 ;348
000030  e12fff1e          BX       lr
;;;350    
                          ENDP

                  |L1.52|
                          DCD      0xb000a010
                  |L1.56|
                          DCD      0xb000a014

                          AREA ||i.jpegCalScalingFactor||, CODE, READONLY, ALIGN=2

                  jpegCalScalingFactor PROC
;;;547    
;;;548    INT jpegCalScalingFactor(
000000  e92d47f0          PUSH     {r4-r10,lr}
;;;549        UINT8   u8Mode,             //Up / Down Scaling
;;;550        UINT16  u16Height,          //Original Height
;;;551        UINT16  u16Width,           //Original Width
;;;552        UINT16  u16ScalingHeight,   //Scaled Height
;;;553        UINT16  u16ScalingWidth,    //Scaled Width
;;;554        PUINT16 pu16RatioH,         //Horizontal Ratio
;;;555        PUINT16 pu16RatioW          //Vertical Ratio
;;;556    )
;;;557    {
;;;558        if(u8Mode == JPEG_ENC_UPSCALE_MODE) {
000004  e59d7028          LDR      r7,[sp,#0x28]
000008  e59d8024          LDR      r8,[sp,#0x24]
00000c  e59d9020          LDR      r9,[sp,#0x20]
000010  e3500000          CMP      r0,#0
000014  e1a06003          MOV      r6,r3                 ;557
000018  e1a04002          MOV      r4,r2                 ;557
00001c  e1a05001          MOV      r5,r1                 ;557
000020  0a000006          BEQ      |L2.64|
;;;559            if(u16ScalingHeight < u16Height || u16ScalingWidth < u16Width)
;;;560                return E_JPEG_INVALID_PARAM;
;;;561    
;;;562            *pu16RatioW = (UINT32)((float) (u16ScalingWidth-1) / (float)(u16Width-2) * 1024);
;;;563            *pu16RatioH = (UINT32)((float) (u16ScalingHeight-1) / (float)(u16Height-2) * 1024);
;;;564    
;;;565        } else if(u8Mode == JPEG_DEC_PACKET_DOWNSCALE_MODE) {
000024  e3500001          CMP      r0,#1
000028  0a00001d          BEQ      |L2.164|
;;;566            if(u16ScalingHeight > u16Height || u16ScalingWidth> u16Width)
;;;567                return E_JPEG_INVALID_PARAM;
;;;568    
;;;569            *pu16RatioW = (UINT32)(((float) (u16ScalingWidth) / (u16Width-1) * 8192));
;;;570    
;;;571            if(*pu16RatioW > 8192)
;;;572                *pu16RatioW = 8192;
;;;573    
;;;574            *pu16RatioH = (UINT32)((float) (u16ScalingHeight) / (u16Height - 1) * 8192);
;;;575    
;;;576            if(*pu16RatioH > 8192)
;;;577                *pu16RatioH = 8192;
;;;578    
;;;579        } else if(u8Mode == JPEG_DEC_PLANAR_DOWNSCALE_MODE || u8Mode == JPEG_ENC_PLANAR_PRIMARY_DOWNSCALE_MODE || u8Mode == JPEG_ENC_PLANAR_THUMBNAIL_DOWNSCALE_MODE) {
00002c  e3500002          CMP      r0,#2
000030  13500003          CMPNE    r0,#3
000034  13500004          CMPNE    r0,#4
000038  0a00003c          BEQ      |L2.304|
00003c  ea000049          B        |L2.360|
                  |L2.64|
000040  e1560005          CMP      r6,r5                 ;559
000044  21590004          CMPCS    r9,r4                 ;559
000048  3a000046          BCC      |L2.360|
00004c  e2420002          SUB      r0,r2,#2              ;562
000050  ebfffffe          BL       __aeabi_i2f
000054  e1a04000          MOV      r4,r0                 ;562
000058  e2490001          SUB      r0,r9,#1              ;562
00005c  ebfffffe          BL       __aeabi_i2f
000060  e1a01004          MOV      r1,r4                 ;562
000064  ebfffffe          BL       __aeabi_fdiv
000068  e3a0100a          MOV      r1,#0xa               ;562
00006c  ebfffffe          BL       __ARM_scalbnf
000070  ebfffffe          BL       __aeabi_f2uiz
000074  e1c700b0          STRH     r0,[r7,#0]            ;562
000078  e2450002          SUB      r0,r5,#2              ;563
00007c  ebfffffe          BL       __aeabi_i2f
000080  e1a04000          MOV      r4,r0                 ;563
000084  e2460001          SUB      r0,r6,#1              ;563
000088  ebfffffe          BL       __aeabi_i2f
00008c  e1a01004          MOV      r1,r4                 ;563
000090  ebfffffe          BL       __aeabi_fdiv
000094  e3a0100a          MOV      r1,#0xa               ;563
000098  ebfffffe          BL       __ARM_scalbnf
00009c  ebfffffe          BL       __aeabi_f2uiz
0000a0  ea000041          B        |L2.428|
                  |L2.164|
0000a4  e1560005          CMP      r6,r5                 ;566
0000a8  91590004          CMPLS    r9,r4                 ;566
0000ac  8a00002d          BHI      |L2.360|
0000b0  e2420001          SUB      r0,r2,#1              ;569
0000b4  ebfffffe          BL       __aeabi_i2f
0000b8  e1a04000          MOV      r4,r0                 ;569
0000bc  e1a00009          MOV      r0,r9                 ;569
0000c0  ebfffffe          BL       __aeabi_ui2f
0000c4  e1a01004          MOV      r1,r4                 ;569
0000c8  ebfffffe          BL       __aeabi_fdiv
0000cc  e3a0100d          MOV      r1,#0xd               ;569
0000d0  ebfffffe          BL       __ARM_scalbnf
0000d4  ebfffffe          BL       __aeabi_f2uiz
0000d8  e1a00800          LSL      r0,r0,#16             ;569
0000dc  e1a00820          LSR      r0,r0,#16             ;569
0000e0  e3500a02          CMP      r0,#0x2000            ;571
0000e4  e1c700b0          STRH     r0,[r7,#0]            ;569
0000e8  e3a04a02          MOV      r4,#0x2000            ;572
0000ec  e2450001          SUB      r0,r5,#1              ;574
0000f0  81c740b0          STRHHI   r4,[r7,#0]            ;572
0000f4  ebfffffe          BL       __aeabi_i2f
0000f8  e1a05000          MOV      r5,r0                 ;574
0000fc  e1a00006          MOV      r0,r6                 ;574
000100  ebfffffe          BL       __aeabi_ui2f
000104  e1a01005          MOV      r1,r5                 ;574
000108  ebfffffe          BL       __aeabi_fdiv
00010c  e3a0100d          MOV      r1,#0xd               ;574
000110  ebfffffe          BL       __ARM_scalbnf
000114  ebfffffe          BL       __aeabi_f2uiz
000118  e1a00800          LSL      r0,r0,#16             ;574
00011c  e1a00820          LSR      r0,r0,#16             ;574
000120  e3500a02          CMP      r0,#0x2000            ;576
000124  e1c800b0          STRH     r0,[r8,#0]            ;574
000128  81c840b0          STRHHI   r4,[r8,#0]            ;577
00012c  ea00001f          B        |L2.432|
                  |L2.304|
;;;580            UINT16 u16RatioW,u16RatioH;
;;;581            if(u16ScalingHeight > u16Height || u16ScalingWidth> u16Width)
000130  e1560005          CMP      r6,r5
000134  91590004          CMPLS    r9,r4
000138  8a00000a          BHI      |L2.360|
;;;582                return E_JPEG_INVALID_PARAM;
;;;583            if(u16Height % u16ScalingHeight)
00013c  e1a01003          MOV      r1,r3
000140  e1a00005          MOV      r0,r5
000144  ebfffffe          BL       __aeabi_uidivmod
000148  e3510000          CMP      r1,#0
00014c  e1a05000          MOV      r5,r0
000150  1a000004          BNE      |L2.360|
;;;584                return E_JPEG_INVALID_PARAM;
;;;585            if(u16Width % u16ScalingWidth)
000154  e1a01009          MOV      r1,r9
000158  e1a00004          MOV      r0,r4
00015c  ebfffffe          BL       __aeabi_uidivmod
000160  e3510000          CMP      r1,#0
000164  0a000001          BEQ      |L2.368|
                  |L2.360|
;;;586                return E_JPEG_INVALID_PARAM;
;;;587    
;;;588            u16RatioW = u16Width / u16ScalingWidth;
;;;589    
;;;590            u16RatioW = u16RatioW / 2 - 1;
;;;591    
;;;592            if((u16RatioW != 0) && (u16RatioW != 1) && (u16RatioW != 3))
;;;593                return E_JPEG_INVALID_PARAM;
;;;594    
;;;595            u16RatioH = u16Height / u16ScalingHeight - 1;
;;;596    
;;;597            if((u16RatioH != 0) && (u16RatioH != 1) && (u16RatioH != 3) && (u16RatioH != 7))
;;;598                return E_JPEG_INVALID_PARAM;
;;;599    
;;;600            *pu16RatioW = u16RatioW;
;;;601            *pu16RatioH = u16RatioH;
;;;602        } else
;;;603            return E_JPEG_INVALID_PARAM;
000168  e3a00002          MOV      r0,#2
;;;604    
;;;605        return E_SUCCESS;
;;;606    
;;;607    }
00016c  e8bd87f0          POP      {r4-r10,pc}
                  |L2.368|
000170  e3e01000          MVN      r1,#0                 ;590
000174  e08100a0          ADD      r0,r1,r0,LSR #1       ;590
000178  e0101821          ANDS     r1,r0,r1,LSR #16      ;590
00017c  13510001          CMPNE    r1,#1                 ;592
000180  13510003          CMPNE    r1,#3                 ;592
000184  1afffff7          BNE      |L2.360|
000188  e2450001          SUB      r0,r5,#1              ;595
00018c  e1a00800          LSL      r0,r0,#16             ;595
000190  e1b00820          LSRS     r0,r0,#16             ;595
000194  13500001          CMPNE    r0,#1                 ;597
000198  0a000002          BEQ      |L2.424|
00019c  e3500003          CMP      r0,#3                 ;597
0001a0  13500007          CMPNE    r0,#7                 ;597
0001a4  1affffef          BNE      |L2.360|
                  |L2.424|
0001a8  e1c710b0          STRH     r1,[r7,#0]            ;600
                  |L2.428|
0001ac  e1c800b0          STRH     r0,[r8,#0]            ;601
                  |L2.432|
0001b0  e3a00001          MOV      r0,#1                 ;605
0001b4  e8bd87f0          POP      {r4-r10,pc}
;;;608    
                          ENDP


                          AREA ||i.jpegClose||, CODE, READONLY, ALIGN=2

                  jpegClose PROC
;;;1126     */
;;;1127   VOID jpegClose(void)
000000  e59f0014          LDR      r0,|L3.28|
;;;1128   {
;;;1129   
;;;1130       /* Reset JPEG (JMCR [1]) */
;;;1131       outp32(REG_JMCR,0x00000002);
000004  e3a01002          MOV      r1,#2
000008  e5801000          STR      r1,[r0,#0]
;;;1132       outp32(REG_JMCR,0x00000000);
00000c  e3a01000          MOV      r1,#0
000010  e5801000          STR      r1,[r0,#0]
;;;1133   
;;;1134       //outp32(REG_AHBCLK, (inp32(REG_AHBCLK) & ~JPG_CKE));
;;;1135   
;;;1136       sysDisableInterrupt(JPEG_IRQn);
000014  e3a00021          MOV      r0,#0x21
000018  eafffffe          B        sysDisableInterrupt
;;;1137   }
;;;1138   
                          ENDP

                  |L3.28|
                          DCD      0xb000a000

                          AREA ||i.jpegDecodeTrigger||, CODE, READONLY, ALIGN=2

                  jpegDecodeTrigger PROC
;;;440    
;;;441    VOID jpegDecodeTrigger(void)
000000  e92d4070          PUSH     {r4-r6,lr}
;;;442    {
;;;443        g_bWait = TRUE;
000004  e59f408c          LDR      r4,|L4.152|
000008  e3a00001          MOV      r0,#1
00000c  e5c40000          STRB     r0,[r4,#0]  ; g_bWait
;;;444        g_jpegError = FALSE;
000010  e3a05000          MOV      r5,#0
000014  e5c45001          STRB     r5,[r4,#1]  ; g_jpegError
;;;445    
;;;446        memset(&jpegInfo, 0, sizeof(jpegInfo));
000018  e59f007c          LDR      r0,|L4.156|
00001c  e3a01024          MOV      r1,#0x24
000020  ebfffffe          BL       __aeabi_memclr4
;;;447    
;;;448        /* Decode Complete /Decode Header End/Decode Error Interrupt Enable and clear the Decode Complete /Decode Header End/Decode Error Interrupt */
;;;449        if(g_InputWait) {
000024  e5d41004          LDRB     r1,[r4,#4]  ; g_InputWait
;;;450            g_u32BufferCount = 0;
;;;451            g_u32DecInputWaitAddr = JPEG_GET_BITSTREAM_ADDR();
000028  e59f0070          LDR      r0,|L4.160|
00002c  e3510000          CMP      r1,#0                 ;449
000030  0a000013          BEQ      |L4.132|
000034  e5845038          STR      r5,[r4,#0x38]         ;450  ; g_u32BufferCount
000038  e59010a0          LDR      r1,[r0,#0xa0]
00003c  e584103c          STR      r1,[r4,#0x3c]  ; g_u32DecInputWaitAddr
;;;452            if(g_OutputWait)
000040  e5d41003          LDRB     r1,[r4,#3]  ; g_OutputWait
000044  e3510000          CMP      r1,#0
;;;453                JPEG_INT_ENABLE( DEC_INTE | DER_INTE | DHE_INTE | IPW_INTE | JPG_DOW_INTE);
000048  159f1054          LDRNE    r1,|L4.164|
;;;454            else
;;;455                JPEG_INT_ENABLE( DEC_INTE | DER_INTE | DHE_INTE | IPW_INTE);
00004c  03a01c66          MOVEQ    r1,#0x6600
                  |L4.80|
;;;456        } else if (g_OutputWait) {
;;;457            JPEG_INT_ENABLE( DEC_INTE | DER_INTE | DHE_INTE | JPG_DOW_INTE);
000050  e580102c          STR      r1,[r0,#0x2c]
;;;458        } else
;;;459            JPEG_INT_ENABLE( DEC_INTE | DER_INTE | DHE_INTE);
;;;460    
;;;461    
;;;462    
;;;463        JPEG_CLEAR_INT(DEC_INTS | JPEG_DER_INTS | JPEG_DHE_INTS | JPEG_IPW_INTS | JPG_DOW_INTS);
000054  e590102c          LDR      r1,[r0,#0x2c]
000058  e3c110ff          BIC      r1,r1,#0xff
00005c  e3811401          ORR      r1,r1,#0x1000000
000060  e3811066          ORR      r1,r1,#0x66
000064  e580102c          STR      r1,[r0,#0x2c]
;;;464    
;;;465        outp32(REG_JMCR, JPG_EN | inp32(REG_JMCR));
000068  e5901000          LDR      r1,[r0,#0]
00006c  e3811001          ORR      r1,r1,#1
000070  e5801000          STR      r1,[r0,#0]
;;;466        outp32(REG_JMCR, ~JPG_EN & inp32(REG_JMCR));
000074  e5901000          LDR      r1,[r0,#0]
000078  e3c11001          BIC      r1,r1,#1
00007c  e5801000          STR      r1,[r0,#0]
;;;467    }
000080  e8bd8070          POP      {r4-r6,pc}
                  |L4.132|
000084  e5d41003          LDRB     r1,[r4,#3]            ;456  ; g_OutputWait
000088  e3510000          CMP      r1,#0                 ;456
00008c  159f1014          LDRNE    r1,|L4.168|
000090  03a01c46          MOVEQ    r1,#0x4600            ;459
000094  eaffffed          B        |L4.80|
;;;468    
                          ENDP

                  |L4.152|
                          DCD      ||.data||
                  |L4.156|
                          DCD      ||.bss||
                  |L4.160|
                          DCD      0xb000a000
                  |L4.164|
                          DCD      0x10006600
                  |L4.168|
                          DCD      0x10004600

                          AREA ||i.jpegEncodeTrigger||, CODE, READONLY, ALIGN=2

                  jpegEncodeTrigger PROC
;;;468    
;;;469    VOID jpegEncodeTrigger(void)
000000  e92d40f0          PUSH     {r4-r7,lr}
;;;470    {
;;;471        g_bWait = TRUE;
000004  e59f5220          LDR      r5,|L5.556|
000008  e24dd01c          SUB      sp,sp,#0x1c           ;470
00000c  e3a07001          MOV      r7,#1
000010  e5c57000          STRB     r7,[r5,#0]  ; g_bWait
;;;472        g_jpegError = FALSE;
000014  e3a06000          MOV      r6,#0
000018  e5c56001          STRB     r6,[r5,#1]  ; g_jpegError
;;;473    
;;;474        g_u32OpMode = JPEG_ENC_UPSCALE_MODE;
00001c  e5856034          STR      r6,[r5,#0x34]  ; g_u32OpMode
;;;475    
;;;476        if(g_bEncPrimaryDownScale)
000020  e5d50007          LDRB     r0,[r5,#7]  ; g_bEncPrimaryDownScale
000024  e3500000          CMP      r0,#0
;;;477            g_u32OpMode = JPEG_ENC_PLANAR_PRIMARY_DOWNSCALE_MODE;
000028  13a00003          MOVNE    r0,#3
00002c  15850034          STRNE    r0,[r5,#0x34]  ; g_u32OpMode
;;;478    
;;;479        if (g_bEncThumbnailDownScale)
000030  e5d50006          LDRB     r0,[r5,#6]  ; g_bEncThumbnailDownScale
000034  e3500000          CMP      r0,#0
;;;480            g_u32OpMode = JPEG_ENC_PLANAR_THUMBNAIL_DOWNSCALE_MODE;
000038  13a00004          MOVNE    r0,#4
00003c  15850034          STRNE    r0,[r5,#0x34]  ; g_u32OpMode
;;;481    
;;;482        memset(&jpegInfo, 0, sizeof(jpegInfo));
000040  e59f01e8          LDR      r0,|L5.560|
000044  e3a01024          MOV      r1,#0x24
000048  ebfffffe          BL       __aeabi_memclr4
;;;483    
;;;484        if(g_u32EncRotate!=0) {
00004c  e595000c          LDR      r0,[r5,#0xc]  ; g_u32EncRotate
;;;485            UINT16 u16Height,u16Width;
;;;486    
;;;487            if(((inp32(REG_JITCR) & (PLANAR_ON | EY_ONLY)) != (PLANAR_ON)) && ((inp32(REG_JMCR) & EY422) != 0)) {
000050  e59f41dc          LDR      r4,|L5.564|
000054  e3500000          CMP      r0,#0                 ;484
000058  0a00001f          BEQ      |L5.220|
00005c  e5940008          LDR      r0,[r4,#8]
000060  e59f11d0          LDR      r1,|L5.568|
000064  e0000001          AND      r0,r0,r1
000068  e3500902          CMP      r0,#0x8000
00006c  15940000          LDRNE    r0,[r4,#0]
000070  13100008          TSTNE    r0,#8
000074  1a000033          BNE      |L5.328|
;;;488                g_jpegError = TRUE;
;;;489                g_bWait = FALSE;
;;;490                return;
;;;491            }
;;;492            jpegGetDimension(&u16Width,&u16Height);
000078  e28d1004          ADD      r1,sp,#4
00007c  e1a0000d          MOV      r0,sp
000080  ebfffffe          BL       jpegGetDimension
;;;493    
;;;494            if(g_u32EncRotate == JPEG_IOCTL_SET_ENCODE_PRIMARY_ROTATE_LEFT) {
000084  e595000c          LDR      r0,[r5,#0xc]  ; g_u32EncRotate
;;;495                JPEG_SET_YADDR((JPEG_GET_YADDR() + (u16Width - 1)));
;;;496                JPEG_SET_UADDR((JPEG_GET_UADDR() + (u16Width/2-1)));
;;;497                JPEG_SET_VADDR((JPEG_GET_VADDR() + (u16Width/2-1)));
;;;498            } else {
;;;499                JPEG_SET_YADDR((JPEG_GET_YADDR() + ((u16Height-1) * u16Width)));
000088  e594107c          LDR      r1,[r4,#0x7c]
00008c  e3500022          CMP      r0,#0x22              ;494
000090  0a000030          BEQ      |L5.344|
000094  e1dd00b4          LDRH     r0,[sp,#4]
000098  e1dd30b0          LDRH     r3,[sp,#0]
00009c  e2402001          SUB      r2,r0,#1
0000a0  e0211392          MLA      r1,r2,r3,r1
0000a4  e584107c          STR      r1,[r4,#0x7c]
;;;500                u16Width = JPEG_GET_USTRIDE();
0000a8  e5941098          LDR      r1,[r4,#0x98]
0000ac  e2400002          SUB      r0,r0,#2
0000b0  e1a01801          LSL      r1,r1,#16
0000b4  e1a01821          LSR      r1,r1,#16
;;;501                JPEG_SET_UADDR((JPEG_GET_UADDR() + ((u16Height-2) * u16Width/2)));
0000b8  e0000091          MUL      r0,r1,r0
0000bc  e1cd10b0          STRH     r1,[sp,#0]            ;500
0000c0  e5941080          LDR      r1,[r4,#0x80]
0000c4  e0800fa0          ADD      r0,r0,r0,LSR #31
0000c8  e08110c0          ADD      r1,r1,r0,ASR #1
0000cc  e5841080          STR      r1,[r4,#0x80]
;;;502                JPEG_SET_VADDR((JPEG_GET_VADDR() + ((u16Height-2) * u16Width/2)));
0000d0  e5941084          LDR      r1,[r4,#0x84]
0000d4  e08100c0          ADD      r0,r1,r0,ASR #1
                  |L5.216|
0000d8  e5840084          STR      r0,[r4,#0x84]         ;497
                  |L5.220|
;;;503    
;;;504            }
;;;505        }
;;;506    
;;;507        if(g_bScale) {
0000dc  e5d50002          LDRB     r0,[r5,#2]  ; g_bScale
0000e0  e3500000          CMP      r0,#0
0000e4  0a000036          BEQ      |L5.452|
;;;508            UINT16 u16Height,u16Width,u16ratioH,u16ratioW;
;;;509    
;;;510            if(g_u32EncRotate!=0)
0000e8  e595000c          LDR      r0,[r5,#0xc]  ; g_u32EncRotate
0000ec  e3500000          CMP      r0,#0
;;;511                jpegGetDimension(&u16Width,&u16Height);
;;;512            else
;;;513                jpegGetDimension(&u16Height,&u16Width);
0000f0  028d100c          ADDEQ    r1,sp,#0xc
0000f4  028d0010          ADDEQ    r0,sp,#0x10
0000f8  128d1010          ADDNE    r1,sp,#0x10           ;511
0000fc  128d000c          ADDNE    r0,sp,#0xc            ;511
000100  ebfffffe          BL       jpegGetDimension
;;;514    
;;;515            if(jpegCalScalingFactor(
000104  e595002c          LDR      r0,[r5,#0x2c]  ; g_u32ScaleWidth
000108  e28d1014          ADD      r1,sp,#0x14
00010c  e28d2018          ADD      r2,sp,#0x18
000110  e1a00800          LSL      r0,r0,#16
000114  e1a00820          LSR      r0,r0,#16
000118  e58d1008          STR      r1,[sp,#8]
00011c  e88d0005          STM      sp,{r0,r2}
000120  e5950030          LDR      r0,[r5,#0x30]  ; g_u32ScaleHeight
000124  e1a03800          LSL      r3,r0,#16
000128  e5950034          LDR      r0,[r5,#0x34]  ; g_u32OpMode
00012c  e1a03823          LSR      r3,r3,#16
000130  e1dd20bc          LDRH     r2,[sp,#0xc]
000134  e1dd11b0          LDRH     r1,[sp,#0x10]
000138  e20000ff          AND      r0,r0,#0xff
00013c  ebfffffe          BL       jpegCalScalingFactor
000140  e3500001          CMP      r0,#1
000144  0a00000f          BEQ      |L5.392|
                  |L5.328|
;;;516                   g_u32OpMode, //Up / Down Scaling
;;;517                   u16Height,                   //Original Height
;;;518                   u16Width,                    //Original Width
;;;519                   g_u32ScaleHeight,        //Scaled Height
;;;520                   g_u32ScaleWidth,     //Scaled Width
;;;521                   &u16ratioH,                  //Horizontal Ratio
;;;522                   &u16ratioW                   //Vertical Ratio
;;;523               ) != E_SUCCESS) {
;;;524                g_jpegError = TRUE;
000148  e5c57001          STRB     r7,[r5,#1]  ; g_jpegError
;;;525                g_bWait = FALSE;
00014c  e5c56000          STRB     r6,[r5,#0]  ; g_bWait
                  |L5.336|
;;;526                return;
;;;527            } else {
;;;528                jpegSetScalingFactor(g_u32OpMode, u16ratioH, u16ratioW);
;;;529                if(g_bEncThumbnailDownScale)
;;;530                    outp32(REG_JTHBWH,((g_u32ScaleHeight & 0x1FFF)<<16) | (g_u32ScaleWidth & 0x1FFF) );
;;;531                else {
;;;532                    if(g_u32EncRotate!=0)
;;;533                        jpegSetDimension(g_u32ScaleWidth, g_u32ScaleHeight);
;;;534                    else
;;;535                        jpegSetDimension(g_u32ScaleHeight, g_u32ScaleWidth);
;;;536                }
;;;537            }
;;;538        }
;;;539    
;;;540        /* Encode Complete Interrupt Enable and clear the Encode Complete Interrupt */
;;;541        JPEG_INT_ENABLE(ENC_INTE);
;;;542        JPEG_CLEAR_INT(ENC_INTS);
;;;543    
;;;544        outp32(REG_JMCR, JPG_EN | inp32(REG_JMCR));
;;;545        outp32(REG_JMCR, ~JPG_EN & inp32(REG_JMCR));
;;;546    }
000150  e28dd01c          ADD      sp,sp,#0x1c
000154  e8bd80f0          POP      {r4-r7,pc}
                  |L5.344|
000158  e1dd00b0          LDRH     r0,[sp,#0]            ;495
00015c  e0811000          ADD      r1,r1,r0              ;495
000160  e2411001          SUB      r1,r1,#1              ;495
000164  e584107c          STR      r1,[r4,#0x7c]         ;495
000168  e5941080          LDR      r1,[r4,#0x80]         ;496
00016c  e08110a0          ADD      r1,r1,r0,LSR #1       ;496
000170  e2411001          SUB      r1,r1,#1              ;496
000174  e5841080          STR      r1,[r4,#0x80]         ;496
000178  e5941084          LDR      r1,[r4,#0x84]         ;497
00017c  e08100a0          ADD      r0,r1,r0,LSR #1       ;497
000180  e2400001          SUB      r0,r0,#1              ;497
000184  eaffffd3          B        |L5.216|
                  |L5.392|
000188  e5950034          LDR      r0,[r5,#0x34]         ;528  ; g_u32OpMode
00018c  e1dd21b4          LDRH     r2,[sp,#0x14]         ;528
000190  e1dd11b8          LDRH     r1,[sp,#0x18]         ;528
000194  e20000ff          AND      r0,r0,#0xff           ;528
000198  ebfffffe          BL       jpegSetScalingFactor
00019c  e5d50006          LDRB     r0,[r5,#6]            ;529  ; g_bEncThumbnailDownScale
0001a0  e3500000          CMP      r0,#0                 ;529
0001a4  0a000013          BEQ      |L5.504|
0001a8  e595002c          LDR      r0,[r5,#0x2c]         ;530  ; g_u32ScaleWidth
0001ac  e5951030          LDR      r1,[r5,#0x30]         ;530  ; g_u32ScaleHeight
0001b0  e1a00980          LSL      r0,r0,#19             ;530
0001b4  e1a009a0          LSR      r0,r0,#19             ;530
0001b8  e3c11a0e          BIC      r1,r1,#0xe000         ;530
0001bc  e1800801          ORR      r0,r0,r1,LSL #16      ;530
0001c0  e584001c          STR      r0,[r4,#0x1c]         ;530
                  |L5.452|
0001c4  e3a00b02          MOV      r0,#0x800             ;541
0001c8  e584002c          STR      r0,[r4,#0x2c]         ;541
0001cc  e594002c          LDR      r0,[r4,#0x2c]         ;542
0001d0  e3c000ff          BIC      r0,r0,#0xff           ;542
0001d4  e3800008          ORR      r0,r0,#8              ;542
0001d8  e584002c          STR      r0,[r4,#0x2c]         ;542
0001dc  e5940000          LDR      r0,[r4,#0]            ;544
0001e0  e3800001          ORR      r0,r0,#1              ;544
0001e4  e5840000          STR      r0,[r4,#0]            ;544
0001e8  e5940000          LDR      r0,[r4,#0]            ;545
0001ec  e3c00001          BIC      r0,r0,#1              ;545
0001f0  e5840000          STR      r0,[r4,#0]            ;545
0001f4  eaffffd5          B        |L5.336|
                  |L5.504|
0001f8  e595000c          LDR      r0,[r5,#0xc]          ;532  ; g_u32EncRotate
0001fc  e3500000          CMP      r0,#0                 ;532
000200  0595002c          LDREQ    r0,[r5,#0x2c]         ;535  ; g_u32ScaleWidth
000204  01a01800          LSLEQ    r1,r0,#16             ;535
000208  e5950030          LDR      r0,[r5,#0x30]         ;535  ; g_u32ScaleHeight
00020c  01a01821          LSREQ    r1,r1,#16             ;535
000210  11a01800          LSLNE    r1,r0,#16             ;533
000214  1595002c          LDRNE    r0,[r5,#0x2c]         ;533  ; g_u32ScaleWidth
000218  11a01821          LSRNE    r1,r1,#16             ;533
00021c  e1a00800          LSL      r0,r0,#16             ;533
000220  e1a00820          LSR      r0,r0,#16             ;533
000224  ebfffffe          BL       jpegSetDimension
000228  eaffffe5          B        |L5.452|
;;;547    
                          ENDP

                  |L5.556|
                          DCD      ||.data||
                  |L5.560|
                          DCD      ||.bss||
                  |L5.564|
                          DCD      0xb000a000
                  |L5.568|
                          DCD      0x00008040

                          AREA ||i.jpegGetDecodedDimension||, CODE, READONLY, ALIGN=2

                  jpegGetDecodedDimension PROC
;;;636    
;;;637    VOID jpegGetDecodedDimension(
000000  e59f2014          LDR      r2,|L6.28|
;;;638        PUINT16 pu16Height,         //Decode/Encode Height
;;;639        PUINT16 pu16Width           //Decode/Encode Width
;;;640    )
;;;641    {
;;;642        *pu16Width = inp32(REG_JDECWH) & 0x0000FFFF;
000004  e5923028          LDR      r3,[r2,#0x28]
000008  e1c130b0          STRH     r3,[r1,#0]
;;;643        *pu16Height = inp32(REG_JDECWH) >> 16;
00000c  e5921028          LDR      r1,[r2,#0x28]
000010  e1a01821          LSR      r1,r1,#16
000014  e1c010b0          STRH     r1,[r0,#0]
;;;644    }
000018  e12fff1e          BX       lr
;;;645    
                          ENDP

                  |L6.28|
                          DCD      0xb000a000

                          AREA ||i.jpegGetDimension||, CODE, READONLY, ALIGN=2

                  jpegGetDimension PROC
;;;654    
;;;655    VOID jpegGetDimension(
000000  e59f2018          LDR      r2,|L7.32|
;;;656        PUINT16 pu16Height,         //Decoded Height from bit stream
;;;657        PUINT16 pu16Width           //Decoded Width  from bit stream
;;;658    )
;;;659    {
;;;660        *pu16Height = inp32(REG_JPRIWH) >> 16;
000004  e5923018          LDR      r3,[r2,#0x18]
000008  e1a03823          LSR      r3,r3,#16
00000c  e1c030b0          STRH     r3,[r0,#0]
;;;661        *pu16Width = inp32(REG_JPRIWH) & 0x1FFF;
000010  e5920018          LDR      r0,[r2,#0x18]
000014  e3c00a0e          BIC      r0,r0,#0xe000
000018  e1c100b0          STRH     r0,[r1,#0]
;;;662    
;;;663    }
00001c  e12fff1e          BX       lr
;;;664    
                          ENDP

                  |L7.32|
                          DCD      0xb000a000

                          AREA ||i.jpegGetInfo||, CODE, READONLY, ALIGN=2

                  jpegGetInfo PROC
;;;820      */
;;;821    VOID jpegGetInfo(JPEG_INFO_T *info)
000000  e59f1004          LDR      r1,|L8.12|
;;;822    {
;;;823        memcpy(info, &jpegInfo, sizeof(JPEG_INFO_T));
000004  e3a02024          MOV      r2,#0x24
000008  eafffffe          B        __aeabi_memcpy4
;;;824    }
;;;825    
                          ENDP

                  |L8.12|
                          DCD      ||.bss||

                          AREA ||i.jpegGetScalingFactor||, CODE, READONLY, ALIGN=2

                  jpegGetScalingFactor PROC
;;;664    
;;;665    VOID jpegGetScalingFactor(
000000  e59f3040          LDR      r3,|L9.72|
;;;666        UINT8   u8Mode,             //Up / Down Scaling
;;;667        PUINT16 pu16FactorH,        //Vertical Scaling Factor
;;;668        PUINT16 pu16FactorW         //Horizontal Scaling Factor
;;;669    )
;;;670    {
;;;671        if(u8Mode == JPEG_DEC_PLANAR_DOWNSCALE_MODE) {
000004  e3500002          CMP      r0,#2
000008  0a000007          BEQ      |L9.44|
;;;672            *pu16FactorH = inp32(REG_JPSCALD) & 0x3F;
;;;673            *pu16FactorW = (inp32(REG_JPSCALD) >> 8) & 0x1F;
;;;674        } else {
;;;675            *pu16FactorH = (inp32(REG_JUPRAT) >> 16) & 0x3FFF;
00000c  e59300b0          LDR      r0,[r3,#0xb0]
000010  e3e0c903          MVN      r12,#0xc000
000014  e00c0820          AND      r0,r12,r0,LSR #16
000018  e1c100b0          STRH     r0,[r1,#0]
;;;676            *pu16FactorW = inp32(REG_JUPRAT) & 0x3FFF;
00001c  e59300b0          LDR      r0,[r3,#0xb0]
000020  e3c00903          BIC      r0,r0,#0xc000
                  |L9.36|
000024  e1c200b0          STRH     r0,[r2,#0]            ;673
;;;677        }
;;;678    }
000028  e12fff1e          BX       lr
                  |L9.44|
00002c  e5930058          LDR      r0,[r3,#0x58]         ;672
000030  e200003f          AND      r0,r0,#0x3f           ;672
000034  e1c100b0          STRH     r0,[r1,#0]            ;672
000038  e5930058          LDR      r0,[r3,#0x58]         ;673
00003c  e1a00980          LSL      r0,r0,#19             ;673
000040  e1a00da0          LSR      r0,r0,#27             ;673
000044  eafffff6          B        |L9.36|
;;;679    
                          ENDP

                  |L9.72|
                          DCD      0xb000a000

                          AREA ||i.jpegISR||, CODE, READONLY, ALIGN=2

                  jpegISR PROC
;;;71     /* Interrupt Service Routine for H/W JPEG CODEC */
;;;72     void jpegISR(void)
000000  e92d4ff0          PUSH     {r4-r11,lr}
;;;73     {
;;;74         UINT32 u32interruptStatus;
;;;75     
;;;76         /* Get the interrupt status */
;;;77         u32interruptStatus = JPEG_GET_INT_STATUS();
000004  e59f94a4          LDR      r9,|L10.1200|
000008  e24dd01c          SUB      sp,sp,#0x1c           ;73
00000c  e599002c          LDR      r0,[r9,#0x2c]
000010  e59f149c          LDR      r1,|L10.1204|
;;;78     
;;;79         /* It's Header Decode Complete Interrupt */
;;;80         if(u32interruptStatus & DHE_INTS) {
;;;81             UINT32 u32YuvFormat;
;;;82             UINT16 u16Height,u16Width,UVHeight,UVWidth;
;;;83             UINT16 u16WidthTmp, u16HeightTmp;
;;;84             /* Get the JPEG format */
;;;85             u32YuvFormat = JPEG_DEC_GET_DECODED_IMAGE_FORMAT();
;;;86     
;;;87             /* Get the decoded image dimension */
;;;88             jpegGetDecodedDimension(&u16Height,&u16Width);
;;;89     
;;;90             jpegInfo.jpeg_width = u16Width;
000014  e59f849c          LDR      r8,|L10.1208|
;;;91             jpegInfo.jpeg_height = u16Height;
;;;92             jpegInfo.yuvformat = u32YuvFormat;
;;;93     
;;;94             if(pfnJpegHeaderDecode!= NULL) {
000018  e59fa49c          LDR      r10,|L10.1212|
00001c  e0000001          AND      r0,r0,r1              ;77
000020  e3100040          TST      r0,#0x40              ;80
000024  e3a05000          MOV      r5,#0                 ;80
;;;95                 if(!pfnJpegHeaderDecode()) {
;;;96                     jpegInit();
;;;97                     g_bWait = FALSE;
;;;98                     return;
;;;99                 }
;;;100            }
;;;101    
;;;102            if(g_bScale) {
;;;103                UINT16 u16RatioH,u16RatioW;
;;;104    
;;;105                if(jpegCalScalingFactor(
;;;106                       g_u32OpMode,         //Up / Down Scaling
;;;107                       u16Height,               //Original Height
;;;108                       u16Width,                //Original Width
;;;109                       g_u32ScaleHeight,            //Scaled Height
;;;110                       g_u32ScaleWidth,         //Scaled Width
;;;111                       &u16RatioH,              //Horizontal Ratio
;;;112                       &u16RatioW               //Vertical Ratio
;;;113                   ) != E_SUCCESS) {
;;;114                    g_bWait = FALSE;
;;;115                    g_jpegError = TRUE;
000028  e3a0b001          MOV      r11,#1
00002c  0a0000bc          BEQ      |L10.804|
000030  e5990008          LDR      r0,[r9,#8]            ;85
000034  e28d100c          ADD      r1,sp,#0xc            ;88
000038  e2004c07          AND      r4,r0,#0x700          ;85
00003c  e28d0010          ADD      r0,sp,#0x10           ;88
000040  ebfffffe          BL       jpegGetDecodedDimension
000044  e1dd00bc          LDRH     r0,[sp,#0xc]          ;90
000048  e588000c          STR      r0,[r8,#0xc]          ;90  ; jpegInfo
00004c  e1dd01b0          LDRH     r0,[sp,#0x10]         ;91
000050  e5880010          STR      r0,[r8,#0x10]         ;94  ; jpegInfo, jpegInfo
000054  e5884000          STR      r4,[r8,#0]            ;94
000058  e59a001c          LDR      r0,[r10,#0x1c]        ;94  ; pfnJpegHeaderDecode
00005c  e3500000          CMP      r0,#0                 ;94
000060  0a000002          BEQ      |L10.112|
000064  e12fff30          BLX      r0                    ;95
000068  e3500000          CMP      r0,#0                 ;95
00006c  0a00010b          BEQ      |L10.1184|
                  |L10.112|
000070  e5da0002          LDRB     r0,[r10,#2]           ;102  ; g_bScale
000074  e3500000          CMP      r0,#0                 ;102
000078  0a00001c          BEQ      |L10.240|
00007c  e59a002c          LDR      r0,[r10,#0x2c]        ;105  ; g_u32ScaleWidth
000080  e28d1014          ADD      r1,sp,#0x14           ;105
000084  e28d2018          ADD      r2,sp,#0x18           ;105
000088  e1a00800          LSL      r0,r0,#16             ;105
00008c  e1a00820          LSR      r0,r0,#16             ;105
000090  e58d1008          STR      r1,[sp,#8]            ;105
000094  e88d0005          STM      sp,{r0,r2}            ;105
000098  e59a0030          LDR      r0,[r10,#0x30]        ;105  ; g_u32ScaleHeight
00009c  e1a03800          LSL      r3,r0,#16             ;105
0000a0  e59a0034          LDR      r0,[r10,#0x34]        ;105  ; g_u32OpMode
0000a4  e1a03823          LSR      r3,r3,#16             ;105
0000a8  e1dd20bc          LDRH     r2,[sp,#0xc]          ;105
0000ac  e1dd11b0          LDRH     r1,[sp,#0x10]         ;105
0000b0  e20000ff          AND      r0,r0,#0xff           ;105
0000b4  ebfffffe          BL       jpegCalScalingFactor
0000b8  e3500001          CMP      r0,#1                 ;105
0000bc  15ca5000          STRBNE   r5,[r10,#0]           ;114  ; g_bWait
0000c0  15cab001          STRBNE   r11,[r10,#1]  ; g_jpegError
0000c4  1a000014          BNE      |L10.284|
;;;116                } else {
;;;117                    jpegSetScalingFactor(g_u32OpMode,u16RatioH,u16RatioW);
0000c8  e59a0034          LDR      r0,[r10,#0x34]  ; g_u32OpMode
0000cc  e1dd21b4          LDRH     r2,[sp,#0x14]
0000d0  e1dd11b8          LDRH     r1,[sp,#0x18]
0000d4  e20000ff          AND      r0,r0,#0xff
0000d8  ebfffffe          BL       jpegSetScalingFactor
;;;118                    u16Width =  g_u32ScaleWidth;
0000dc  e59a002c          LDR      r0,[r10,#0x2c]  ; g_u32ScaleWidth
0000e0  e1cd00bc          STRH     r0,[sp,#0xc]
;;;119                    u16Height = g_u32ScaleHeight;
0000e4  e59a0030          LDR      r0,[r10,#0x30]  ; g_u32ScaleHeight
0000e8  e1cd01b0          STRH     r0,[sp,#0x10]
0000ec  ea00000a          B        |L10.284|
                  |L10.240|
;;;120                }
;;;121            } else {
;;;122    
;;;123                if(u32YuvFormat == JPEG_DEC_YUV411) {
0000f0  e3540c03          CMP      r4,#0x300
0000f4  0a000046          BEQ      |L10.532|
;;;124                    /* 32-pixel alignment for YUV411 raw data */
;;;125                    if(u16Width % 32)
;;;126                        u16Width = (u16Width & 0xFFFFFFE0) + 32;
;;;127                } else if((u32YuvFormat == JPEG_DEC_YUV444) || (u32YuvFormat == JPEG_DEC_YUV422T)) {
;;;128                    /* 8-pixel alignment for YUV444 raw data */
;;;129                    if(u16Width % 8)
;;;130                        u16Width = (u16Width & 0xFFFFFFF8) + 8;
;;;131                } else {
;;;132                    /* 16-pixel alignment for YUV422 or YUV420 raw data */
;;;133                    if(u16Width % 16)
0000f8  e1dd00bc          LDRH     r0,[sp,#0xc]
0000fc  e3540c02          CMP      r4,#0x200             ;127
000100  13540c05          CMPNE    r4,#0x500             ;127
000104  0a000048          BEQ      |L10.556|
000108  e310000f          TST      r0,#0xf
;;;134                        u16Width = (u16Width & 0xFFFFFFF0) + 16;
00010c  13c0000f          BICNE    r0,r0,#0xf
000110  12800010          ADDNE    r0,r0,#0x10
000114  0a000000          BEQ      |L10.284|
                  |L10.280|
000118  e1cd00bc          STRH     r0,[sp,#0xc]
                  |L10.284|
;;;135                }
;;;136            }
;;;137    
;;;138            if(g_u32Stride >= u16Width) {
00011c  e59a0028          LDR      r0,[r10,#0x28]  ; g_u32Stride
000120  e1dd10bc          LDRH     r1,[sp,#0xc]
000124  e1500001          CMP      r0,r1
;;;139                jpegInfo.stride = g_u32Stride;
;;;140                g_u32Stride = g_u32Stride - u16Width;
;;;141                JPEG_SET_YSTRIDE(g_u32Stride);
;;;142                u16Width = jpegInfo.stride;
;;;143            } else {
;;;144                g_u32Stride = 0;
000128  358a5028          STRCC    r5,[r10,#0x28]  ; g_u32Stride
;;;145                JPEG_SET_YSTRIDE(0);
00012c  35895094          STRCC    r5,[r9,#0x94]
;;;146                jpegInfo.stride = 0;
000130  35885014          STRCC    r5,[r8,#0x14]  ; jpegInfo
000134  3a000007          BCC      |L10.344|
000138  e59a0028          LDR      r0,[r10,#0x28]        ;139  ; g_u32Stride
00013c  e5880014          STR      r0,[r8,#0x14]         ;140  ; jpegInfo
000140  e59a2028          LDR      r2,[r10,#0x28]        ;140  ; g_u32Stride
000144  e0421001          SUB      r1,r2,r1              ;140
000148  e58a1028          STR      r1,[r10,#0x28]        ;140  ; g_u32Stride
00014c  e59a1028          LDR      r1,[r10,#0x28]        ;141  ; g_u32Stride
000150  e5891094          STR      r1,[r9,#0x94]         ;141
000154  e1cd00bc          STRH     r0,[sp,#0xc]          ;142
                  |L10.344|
;;;147            }
;;;148    
;;;149            if(g_u32OutputFormat == JPEG_DEC_PRIMARY_PLANAR_YUV || g_u32OutputFormat ==JPEG_DEC_THUMBNAIL_PLANAR_YUV) {
000158  e59a0040          LDR      r0,[r10,#0x40]  ; g_u32OutputFormat
00015c  e2401902          SUB      r1,r0,#0x8000
000160  e2511021          SUBS     r1,r1,#0x21
000164  159a0040          LDRNE    r0,[r10,#0x40]  ; g_u32OutputFormat
000168  12401902          SUBNE    r1,r0,#0x8000
;;;150                if(g_u32WindowDec) {
;;;151                    u16WidthTmp = u16Width;
;;;152                    u16HeightTmp = u16Height;
;;;153    
;;;154                    u16Width = g_u32windowSizeX;
;;;155                    u16Height = g_u32windowSizeY;
;;;156                }
;;;157    
;;;158                if(u32YuvFormat == JPEG_DEC_YUV411) {
;;;159                    /* For YUV411 raw data */
;;;160                    UVWidth = u16Width/4;
;;;161                } else if((u32YuvFormat == JPEG_DEC_YUV444) || (u32YuvFormat == JPEG_DEC_YUV422T)) {
;;;162                    /* For YUV444 raw data */
;;;163                    UVWidth = u16Width;
;;;164                }
;;;165                /* Set the U-component and V-componente width for YUV422 or YUV420 raw data */
;;;166                else if(u16Width % 2)
;;;167                    UVWidth = u16Width / 2 + 1;
;;;168                else
;;;169                    UVWidth = u16Width / 2;
;;;170    
;;;171    
;;;172                /* Sets the height of U and V for YUV420 image */
;;;173                if(u32YuvFormat == JPEG_DEC_YUV420) {
;;;174                    /* 16-pixel alignment for YUV422 or YUV420 raw data */
;;;175                    if(u16Height % 16)
;;;176                        u16Height = (u16Height & 0xFFFFFFF0) + 16;
;;;177                    UVHeight = u16Height / 2;
;;;178                } else if(u32YuvFormat == JPEG_DEC_YUV422) {
;;;179                    /* 8-pixel alignment for YUV444 raw data */
;;;180                    if(u16Height % 8)
;;;181                        u16Height = (u16Height & 0xFFFFFFF8) + 8;
;;;182                    UVHeight = u16Height;
;;;183                } else if(u32YuvFormat == JPEG_DEC_YUV444) {
;;;184                    /* 8-pixel alignment for YUV444 raw data */
;;;185                    if(u16Height % 8)
;;;186                        u16Height = (u16Height & 0xFFFFFFF8) + 8;
;;;187                    UVHeight = u16Height;
;;;188                } else if(u32YuvFormat == JPEG_DEC_YUV411) {
;;;189                    /* 8-pixel alignment for YUV411 raw data */
;;;190                    if(u16Height % 8)
;;;191                        u16Height = (u16Height & 0xFFFFFFF8) + 8;
;;;192                    UVHeight = u16Height;
;;;193                } else if(u32YuvFormat == JPEG_DEC_YUV422T) {
;;;194                    /* 16-pixel alignment for YUV422 or YUV420 raw data */
;;;195                    if(u16Height % 16)
;;;196                        u16Height = (u16Height & 0xFFFFFFF0) + 16;
;;;197                    UVHeight = u16Height / 2;
;;;198                } else {
;;;199                    /* 8-pixel alignment for raw data */
;;;200                    if(u16Height % 8)
;;;201                        u16Height = (u16Height & 0xFFFFFFF8) + 8;
;;;202                    UVHeight = u16Height;
;;;203                }
;;;204    
;;;205                JPEG_SET_UADDR(JPEG_GET_YADDR() + u16Width * u16Height);
;;;206                JPEG_SET_VADDR(JPEG_GET_UADDR() + UVWidth * UVHeight);
;;;207    
;;;208                if(u32YuvFormat == JPEG_DEC_GRAY)
;;;209                    jpegInfo.image_size[0] = u16Width * u16Height;
;;;210                else
;;;211                    jpegInfo.image_size[0] = u16Width * u16Height + 2* UVWidth * UVHeight;
;;;212    
;;;213                if(g_u32WindowDec) {
;;;214                    u16Width = u16WidthTmp;
;;;215                    u16Height = u16HeightTmp;
;;;216                }
;;;217            } else {
;;;218                if(g_u32WindowDec) {
00016c  e5da0005          LDRB     r0,[r10,#5]  ; g_u32WindowDec
000170  12511031          SUBSNE   r1,r1,#0x31           ;149
000174  0a000031          BEQ      |L10.576|
000178  e3500000          CMP      r0,#0
00017c  0a000005          BEQ      |L10.408|
;;;219                    u16WidthTmp = u16Width;
000180  e1dd70bc          LDRH     r7,[sp,#0xc]
;;;220                    u16HeightTmp = u16Height;
000184  e1dd61b0          LDRH     r6,[sp,#0x10]
;;;221    
;;;222                    u16Width = g_u32windowSizeX;
000188  e59a0044          LDR      r0,[r10,#0x44]  ; g_u32windowSizeX
00018c  e1cd00bc          STRH     r0,[sp,#0xc]
;;;223                    u16Height = g_u32windowSizeY;
000190  e59a0048          LDR      r0,[r10,#0x48]  ; g_u32windowSizeY
000194  e1cd01b0          STRH     r0,[sp,#0x10]
                  |L10.408|
;;;224                }
;;;225    
;;;226                if(jpegInfo.stride)
000198  e5980014          LDR      r0,[r8,#0x14]  ; jpegInfo
00019c  e3500000          CMP      r0,#0
;;;227                    jpegInfo.image_size[0] = jpegInfo.stride * u16Height;
0001a0  11dd11b0          LDRHNE   r1,[sp,#0x10]
0001a4  10000091          MULNE    r0,r1,r0
;;;228                else
;;;229                    jpegInfo.image_size[0] =  u16Width * u16Height;
0001a8  01dd10bc          LDRHEQ   r1,[sp,#0xc]
0001ac  01dd01b0          LDRHEQ   r0,[sp,#0x10]
0001b0  00000091          MULEQ    r0,r1,r0
;;;230    
;;;231                if (g_u32OutputFormat == JPEG_DEC_PRIMARY_PACKET_RGB888)
0001b4  e588001c          STR      r0,[r8,#0x1c]  ; jpegInfo
0001b8  e59a0040          LDR      r0,[r10,#0x40]  ; g_u32OutputFormat
0001bc  e2401905          SUB      r1,r0,#0x14000
;;;232                    jpegInfo.image_size[0] = 4 * jpegInfo.image_size[0];
;;;233                else
;;;234                    jpegInfo.image_size[0] = 2 * jpegInfo.image_size[0];
0001c0  e598001c          LDR      r0,[r8,#0x1c]  ; jpegInfo
0001c4  e2511021          SUBS     r1,r1,#0x21           ;231
0001c8  01a00100          LSLEQ    r0,r0,#2              ;232
0001cc  11a00080          LSLNE    r0,r0,#1
                  |L10.464|
0001d0  e588001c          STR      r0,[r8,#0x1c]         ;211  ; jpegInfo
;;;235    
;;;236                if(g_u32WindowDec) {
0001d4  e5da0005          LDRB     r0,[r10,#5]  ; g_u32WindowDec
0001d8  e3500000          CMP      r0,#0
;;;237                    u16Width = u16WidthTmp;
0001dc  11cd70bc          STRHNE   r7,[sp,#0xc]
;;;238                    u16Height = u16HeightTmp;
0001e0  11cd61b0          STRHNE   r6,[sp,#0x10]
;;;239                }
;;;240    
;;;241            }
;;;242    
;;;243            /* Set the image dimension */
;;;244            jpegSetDimension(u16Height, u16Width);
0001e4  e1dd10bc          LDRH     r1,[sp,#0xc]
0001e8  e1dd01b0          LDRH     r0,[sp,#0x10]
0001ec  ebfffffe          BL       jpegSetDimension
;;;245    
;;;246    
;;;247            outp32(JITCR, inp32(JITCR) | Dec_Scatter_Gather);
0001f0  e5990008          LDR      r0,[r9,#8]
0001f4  e3800701          ORR      r0,r0,#0x40000
0001f8  e5890008          STR      r0,[r9,#8]
;;;248    
;;;249            /* Clear interrupt status */
;;;250            JPEG_CLEAR_INT(DHE_INTS);
0001fc  e599002c          LDR      r0,[r9,#0x2c]
000200  e3c000ff          BIC      r0,r0,#0xff
000204  e3800040          ORR      r0,r0,#0x40
000208  e589002c          STR      r0,[r9,#0x2c]
                  |L10.524|
;;;251        }
;;;252        /* It's Decode Output Wait Interrupt */
;;;253        else if(u32interruptStatus & JPG_DOW_INTS) {
;;;254            if(pfnJpegDecOutputWait!= NULL) {
;;;255                pfnJpegDecOutputWait(inp32(JYADDR0) , inp32(JDOWFBS));
;;;256            }
;;;257            JPEG_CLEAR_INT(JPG_DOW_INTS);
;;;258    
;;;259            outp32(JITCR, inp32(JITCR) | Dec_Scatter_Gather);
;;;260    
;;;261        }
;;;262        /* It's Encode Complete Interrupt */
;;;263        else if(u32interruptStatus & ENC_INTS) {
;;;264            /* Get the Encode Bit stream length */
;;;265            jpegInfo.image_size[0] = JPEG_GET_ENC_PRIMARY_BITSTREAM_SIZE();
;;;266            jpegInfo.image_size[1] = JPEG_GET_ENC_THUMBNAIL_BITSTREAM_SIZE();
;;;267            /* Clear interrupt status */
;;;268            JPEG_CLEAR_INT(ENC_INTS);
;;;269    
;;;270            g_bWait = FALSE;
;;;271    
;;;272            if(pfnJpegEncodeComplete!= NULL)
;;;273                pfnJpegEncodeComplete();
;;;274        }
;;;275        /* It's Decode Complete Interrupt */
;;;276        else if(u32interruptStatus &DEC_INTS) {
;;;277            UINT16 imageWidth,imageHeight;
;;;278    
;;;279            /* Get the image dimension */
;;;280            jpegGetDimension(&imageHeight,&imageWidth);
;;;281    
;;;282            if(g_u32Stride!=0) {
;;;283                imageWidth = imageWidth - g_u32Stride;
;;;284            }
;;;285    
;;;286            jpegInfo.width = imageWidth;
;;;287            jpegInfo.height = imageHeight;
;;;288    
;;;289            /* Clear interrupt status */
;;;290            JPEG_CLEAR_INT(DEC_INTS);
;;;291            JPEG_CLEAR_INT(JPG_DOW_INTS);
;;;292    
;;;293            g_bWait = FALSE;
;;;294    
;;;295            if(pfnJpegDecodeComplete!= NULL)
;;;296                pfnJpegDecodeComplete();
;;;297        }
;;;298        /* It's Decode Error Interrupt */
;;;299        else if(u32interruptStatus & DER_INTS) {
;;;300            /* Clear interrupt status */
;;;301            JPEG_CLEAR_INT(DER_INTS);
;;;302    
;;;303            g_bWait = FALSE;
;;;304            g_jpegError = TRUE;
;;;305    
;;;306            if(pfnJpegDecodeError!= NULL)
;;;307                pfnJpegDecodeError();
;;;308        } else if (u32interruptStatus & IPW_INTS) {
;;;309            /* Clear interrupt status */
;;;310            JPEG_CLEAR_INT(IPW_INTS);
;;;311    
;;;312            JPEG_DEC_RESUME_INPUT_WAIT();
;;;313    
;;;314            if(pfnJpegDecInputWait!= NULL) {
;;;315                if(!pfnJpegDecInputWait((g_u32DecInputWaitAddr + (g_u32BufferCount %2) * g_u16BufferSize),g_u16BufferSize)) {
;;;316                    jpegInit();
;;;317                    g_bWait = FALSE;
;;;318                    return;
;;;319                }
;;;320                g_u32BufferCount++;
;;;321            } else
;;;322                while(1);
;;;323    
;;;324        }
;;;325    
;;;326    }
00020c  e28dd01c          ADD      sp,sp,#0x1c
000210  e8bd8ff0          POP      {r4-r11,pc}
                  |L10.532|
000214  e1dd00bc          LDRH     r0,[sp,#0xc]          ;125
000218  e310001f          TST      r0,#0x1f              ;125
00021c  13c0001f          BICNE    r0,r0,#0x1f           ;126
000220  12800020          ADDNE    r0,r0,#0x20           ;126
000224  1affffbb          BNE      |L10.280|
000228  eaffffbb          B        |L10.284|
                  |L10.556|
00022c  e3100007          TST      r0,#7                 ;129
000230  13c00007          BICNE    r0,r0,#7              ;130
000234  12800008          ADDNE    r0,r0,#8              ;130
000238  1affffb6          BNE      |L10.280|
00023c  eaffffb6          B        |L10.284|
                  |L10.576|
000240  e3500000          CMP      r0,#0                 ;150
000244  0a000005          BEQ      |L10.608|
000248  e1dd70bc          LDRH     r7,[sp,#0xc]          ;151
00024c  e1dd61b0          LDRH     r6,[sp,#0x10]         ;152
000250  e59a0044          LDR      r0,[r10,#0x44]        ;154  ; g_u32windowSizeX
000254  e1cd00bc          STRH     r0,[sp,#0xc]          ;154
000258  e59a0048          LDR      r0,[r10,#0x48]        ;155  ; g_u32windowSizeY
00025c  e1cd01b0          STRH     r0,[sp,#0x10]         ;155
                  |L10.608|
000260  e3540c03          CMP      r4,#0x300             ;158
000264  01dd00bc          LDRHEQ   r0,[sp,#0xc]          ;160
000268  01a01120          LSREQ    r1,r0,#2              ;160
00026c  0a00000f          BEQ      |L10.688|
000270  e3540c02          CMP      r4,#0x200             ;161
000274  13540c05          CMPNE    r4,#0x500             ;161
000278  01dd10bc          LDRHEQ   r1,[sp,#0xc]          ;163
00027c  0a000003          BEQ      |L10.656|
000280  e1dd00bc          LDRH     r0,[sp,#0xc]          ;166
000284  e3100001          TST      r0,#1                 ;166
000288  108b10a0          ADDNE    r1,r11,r0,LSR #1      ;167
00028c  01a010a0          LSREQ    r1,r0,#1              ;169
                  |L10.656|
000290  e3540000          CMP      r4,#0                 ;173
000294  0a00001a          BEQ      |L10.772|
000298  e3540c01          CMP      r4,#0x100             ;178
00029c  13540c02          CMPNE    r4,#0x200             ;183
0002a0  13540c03          CMPNE    r4,#0x300             ;188
0002a4  0a000001          BEQ      |L10.688|
0002a8  e3540c05          CMP      r4,#0x500             ;193
0002ac  0a000014          BEQ      |L10.772|
                  |L10.688|
0002b0  e1dd01b0          LDRH     r0,[sp,#0x10]         ;180
0002b4  e3100007          TST      r0,#7                 ;180
0002b8  13c00007          BICNE    r0,r0,#7              ;181
0002bc  12800008          ADDNE    r0,r0,#8              ;181
0002c0  11cd01b0          STRHNE   r0,[sp,#0x10]         ;181
0002c4  e1a00800          LSL      r0,r0,#16             ;202
0002c8  e1a00820          LSR      r0,r0,#16             ;202
                  |L10.716|
0002cc  e599c07c          LDR      r12,[r9,#0x7c]        ;205
0002d0  e1dd30bc          LDRH     r3,[sp,#0xc]          ;205
0002d4  e1dd21b0          LDRH     r2,[sp,#0x10]         ;205
0002d8  e02cc293          MLA      r12,r3,r2,r12         ;205
0002dc  e589c080          STR      r12,[r9,#0x80]        ;205
0002e0  e599c080          LDR      r12,[r9,#0x80]        ;206
0002e4  e02cc091          MLA      r12,r1,r0,r12         ;206
0002e8  e589c084          STR      r12,[r9,#0x84]        ;206
0002ec  e3540b01          CMP      r4,#0x400             ;208
0002f0  00000293          MULEQ    r0,r3,r2              ;209
0002f4  10020293          MULNE    r2,r3,r2              ;211
0002f8  11a01081          LSLNE    r1,r1,#1              ;211
0002fc  10202091          MLANE    r0,r1,r0,r2           ;211
000300  eaffffb2          B        |L10.464|
                  |L10.772|
000304  e1dd01b0          LDRH     r0,[sp,#0x10]         ;175
000308  e310000f          TST      r0,#0xf               ;175
00030c  13c0000f          BICNE    r0,r0,#0xf            ;176
000310  12800010          ADDNE    r0,r0,#0x10           ;176
000314  11cd01b0          STRHNE   r0,[sp,#0x10]         ;176
000318  e1a00800          LSL      r0,r0,#16             ;197
00031c  e1a008a0          LSR      r0,r0,#17             ;197
000320  eaffffe9          B        |L10.716|
                  |L10.804|
000324  e3100401          TST      r0,#0x1000000         ;253
000328  0a00000c          BEQ      |L10.864|
00032c  e59a2024          LDR      r2,[r10,#0x24]        ;254  ; pfnJpegDecOutputWait
000330  e3520000          CMP      r2,#0                 ;254
000334  1599103c          LDRNE    r1,[r9,#0x3c]         ;255
000338  1599007c          LDRNE    r0,[r9,#0x7c]         ;255
00033c  112fff32          BLXNE    r2                    ;255
000340  e599002c          LDR      r0,[r9,#0x2c]         ;257
000344  e3c000ff          BIC      r0,r0,#0xff           ;257
000348  e3800401          ORR      r0,r0,#0x1000000      ;257
00034c  e589002c          STR      r0,[r9,#0x2c]         ;257
000350  e5990008          LDR      r0,[r9,#8]            ;259
000354  e3800701          ORR      r0,r0,#0x40000        ;259
000358  e5890008          STR      r0,[r9,#8]            ;259
00035c  eaffffaa          B        |L10.524|
                  |L10.864|
000360  e3100008          TST      r0,#8                 ;263
000364  0a00000a          BEQ      |L10.916|
000368  e59900a8          LDR      r0,[r9,#0xa8]         ;265
00036c  e588001c          STR      r0,[r8,#0x1c]         ;266  ; jpegInfo
000370  e59900ac          LDR      r0,[r9,#0xac]         ;266
000374  e5880020          STR      r0,[r8,#0x20]         ;268  ; jpegInfo
000378  e599002c          LDR      r0,[r9,#0x2c]         ;268
00037c  e3c000ff          BIC      r0,r0,#0xff           ;268
000380  e3800008          ORR      r0,r0,#8              ;268
000384  e589002c          STR      r0,[r9,#0x2c]         ;268
000388  e5ca5000          STRB     r5,[r10,#0]           ;270  ; g_bWait
00038c  e59a0018          LDR      r0,[r10,#0x18]        ;272  ; pfnJpegEncodeComplete
000390  ea000025          B        |L10.1068|
                  |L10.916|
000394  e3100004          TST      r0,#4                 ;276
000398  0a00001a          BEQ      |L10.1032|
00039c  e1a0100d          MOV      r1,sp                 ;280
0003a0  e28d0004          ADD      r0,sp,#4              ;280
0003a4  ebfffffe          BL       jpegGetDimension
0003a8  e59a0028          LDR      r0,[r10,#0x28]        ;282  ; g_u32Stride
0003ac  e3500000          CMP      r0,#0                 ;282
0003b0  0a000003          BEQ      |L10.964|
0003b4  e1dd00b0          LDRH     r0,[sp,#0]            ;283
0003b8  e59a1028          LDR      r1,[r10,#0x28]        ;283  ; g_u32Stride
0003bc  e0400001          SUB      r0,r0,r1              ;283
0003c0  e1cd00b0          STRH     r0,[sp,#0]            ;283
                  |L10.964|
0003c4  e1dd00b0          LDRH     r0,[sp,#0]            ;286
0003c8  e5880004          STR      r0,[r8,#4]            ;286  ; jpegInfo
0003cc  e1dd00b4          LDRH     r0,[sp,#4]            ;287
0003d0  e5880008          STR      r0,[r8,#8]            ;290  ; jpegInfo
0003d4  e599002c          LDR      r0,[r9,#0x2c]         ;290
0003d8  e3c000ff          BIC      r0,r0,#0xff           ;290
0003dc  e3800004          ORR      r0,r0,#4              ;290
0003e0  e589002c          STR      r0,[r9,#0x2c]         ;290
0003e4  e599002c          LDR      r0,[r9,#0x2c]         ;291
0003e8  e3c000ff          BIC      r0,r0,#0xff           ;291
0003ec  e3800401          ORR      r0,r0,#0x1000000      ;291
0003f0  e589002c          STR      r0,[r9,#0x2c]         ;291
0003f4  e5ca5000          STRB     r5,[r10,#0]           ;293  ; g_bWait
0003f8  e59a0010          LDR      r0,[r10,#0x10]        ;295  ; pfnJpegDecodeComplete
0003fc  e3500000          CMP      r0,#0                 ;295
000400  112fff30          BLXNE    r0                    ;296
000404  eaffff80          B        |L10.524|
                  |L10.1032|
000408  e3100002          TST      r0,#2                 ;299
00040c  0a00000b          BEQ      |L10.1088|
000410  e599002c          LDR      r0,[r9,#0x2c]         ;301
000414  e3c000ff          BIC      r0,r0,#0xff           ;301
000418  e3800002          ORR      r0,r0,#2              ;301
00041c  e589002c          STR      r0,[r9,#0x2c]         ;301
000420  e5ca5000          STRB     r5,[r10,#0]           ;303  ; g_bWait
000424  e5cab001          STRB     r11,[r10,#1]          ;304  ; g_jpegError
000428  e59a0014          LDR      r0,[r10,#0x14]        ;306  ; pfnJpegDecodeError
                  |L10.1068|
00042c  e3500000          CMP      r0,#0                 ;272
000430  0affff75          BEQ      |L10.524|
000434  e28dd01c          ADD      sp,sp,#0x1c           ;307
000438  e8bd4ff0          POP      {r4-r11,lr}           ;307
00043c  e12fff10          BX       r0                    ;307
                  |L10.1088|
000440  e3100020          TST      r0,#0x20              ;308
000444  0affff70          BEQ      |L10.524|
000448  e599002c          LDR      r0,[r9,#0x2c]         ;310
00044c  e3c000ff          BIC      r0,r0,#0xff           ;310
000450  e3800020          ORR      r0,r0,#0x20           ;310
000454  e589002c          STR      r0,[r9,#0x2c]         ;310
000458  e5990000          LDR      r0,[r9,#0]            ;312
00045c  e3800c02          ORR      r0,r0,#0x200          ;312
000460  e5890000          STR      r0,[r9,#0]            ;312
000464  e59a2020          LDR      r2,[r10,#0x20]        ;314  ; pfnJpegDecInputWait
000468  e3520000          CMP      r2,#0                 ;314
00046c  0a00000e          BEQ      |L10.1196|
000470  e59a0038          LDR      r0,[r10,#0x38]        ;315  ; g_u32BufferCount
000474  e1da10b8          LDRH     r1,[r10,#8]           ;315  ; g_u16BufferSize
000478  e2000001          AND      r0,r0,#1              ;315
00047c  e59a303c          LDR      r3,[r10,#0x3c]        ;315  ; g_u32DecInputWaitAddr
000480  e0203091          MLA      r0,r1,r0,r3           ;315
000484  e1da10b8          LDRH     r1,[r10,#8]           ;315  ; g_u16BufferSize
000488  e12fff32          BLX      r2                    ;315
00048c  e3500000          CMP      r0,#0                 ;315
000490  159a0038          LDRNE    r0,[r10,#0x38]        ;320  ; g_u32BufferCount
000494  12800001          ADDNE    r0,r0,#1              ;320
000498  158a0038          STRNE    r0,[r10,#0x38]        ;320  ; g_u32BufferCount
00049c  1affff5a          BNE      |L10.524|
                  |L10.1184|
0004a0  ebfffffe          BL       jpegInit
0004a4  e5ca5000          STRB     r5,[r10,#0]           ;317  ; g_bWait
0004a8  eaffff57          B        |L10.524|
                  |L10.1196|
0004ac  eafffffe          B        |L10.1196|
;;;327    
                          ENDP

                  |L10.1200|
                          DCD      0xb000a000
                  |L10.1204|
                          DCD      0x010000ff
                  |L10.1208|
                          DCD      ||.bss||
                  |L10.1212|
                          DCD      ||.data||

                          AREA ||i.jpegInit||, CODE, READONLY, ALIGN=2

                  jpegInit PROC
;;;758      */
;;;759    VOID jpegInit(void)
000000  e59f1094          LDR      r1,|L11.156|
;;;760    {
;;;761        /* Set the default values of the JPEG registers */
;;;762        g_bScale = FALSE;
000004  e3a00000          MOV      r0,#0
000008  e5c10002          STRB     r0,[r1,#2]  ; g_bScale
;;;763        g_u32Stride = 0;
00000c  e5810028          STR      r0,[r1,#0x28]  ; g_u32Stride
;;;764        g_u32BufferCount = 0;
000010  e5810038          STR      r0,[r1,#0x38]  ; g_u32BufferCount
;;;765        g_u16ReserveSize = 0;
000014  e1c100ba          STRH     r0,[r1,#0xa]  ; g_u16ReserveSize
;;;766        g_u32WindowDec = FALSE;
000018  e5c10005          STRB     r0,[r1,#5]  ; g_u32WindowDec
;;;767        g_u32windowSizeX = 0;
00001c  e5810044          STR      r0,[r1,#0x44]  ; g_u32windowSizeX
;;;768        g_u32windowSizeY = 0;
000020  e5810048          STR      r0,[r1,#0x48]  ; g_u32windowSizeY
;;;769        g_InputWait = FALSE;
000024  e5c10004          STRB     r0,[r1,#4]  ; g_InputWait
;;;770        g_bEncThumbnailDownScale = FALSE;
000028  e5c10006          STRB     r0,[r1,#6]  ; g_bEncThumbnailDownScale
;;;771        g_bEncPrimaryDownScale = FALSE;
00002c  e5c10007          STRB     r0,[r1,#7]  ; g_bEncPrimaryDownScale
;;;772        g_OutputWait = FALSE;
000030  e5c10003          STRB     r0,[r1,#3]  ; g_OutputWait
;;;773        g_u32EncRotate = 0;
000034  e581000c          STR      r0,[r1,#0xc]  ; g_u32EncRotate
;;;774        pfnJpegHeaderDecode = NULL;
;;;775        pfnJpegDecInputWait = NULL;
000038  e581001c          STR      r0,[r1,#0x1c]  ; pfnJpegHeaderDecode
;;;776        pfnJpegDecOutputWait = NULL;
00003c  e5810020          STR      r0,[r1,#0x20]  ; pfnJpegDecInputWait
;;;777        outp32(REG_JPRIQC, 0x000000F4);
000040  e5810024          STR      r0,[r1,#0x24]  ; pfnJpegDecOutputWait
000044  e59f1054          LDR      r1,|L11.160|
000048  e3a020f4          MOV      r2,#0xf4
00004c  e5812010          STR      r2,[r1,#0x10]
;;;778        outp32(REG_JTHBQC, 0x000000F4);
000050  e5812014          STR      r2,[r1,#0x14]
;;;779        outp32(REG_JPRST, 0x00000004);
000054  e3a02004          MOV      r2,#4
000058  e5812020          STR      r2,[r1,#0x20]
;;;780        outp32(REG_JTRST, 0x00000004);
00005c  e5812024          STR      r2,[r1,#0x24]
;;;781        outp32(REG_JITCR, 0x00000000);
000060  e5810008          STR      r0,[r1,#8]
;;;782        outp32(REG_JINTCR, 0x00000000);
000064  e581002c          STR      r0,[r1,#0x2c]
;;;783        outp32(JDOWFBS,0xFFFFFFFF);
000068  e3e02000          MVN      r2,#0
00006c  e581203c          STR      r2,[r1,#0x3c]
;;;784    
;;;785        // Disable the Primary Up-scaling & Scaling-down
;;;786        outp32(REG_JPSCALU, 0x00000000);
000070  e5810054          STR      r0,[r1,#0x54]
;;;787        outp32(REG_JPSCALD, 0x00000000);
000074  e5810058          STR      r0,[r1,#0x58]
;;;788    
;;;789        // Reset JUPRAT and JSRCH
;;;790        outp32(REG_JUPRAT, 0x00000000);
000078  e58100b0          STR      r0,[r1,#0xb0]
;;;791        outp32(REG_JSRCH, 0x00000FFF);
00007c  e1a02a22          LSR      r2,r2,#20
000080  e58120b8          STR      r2,[r1,#0xb8]
;;;792        //-------------------------------------------
;;;793    
;;;794        /* Reset JPEG (JMCR [1]) */
;;;795        outp32(REG_JMCR,0x00000002);
000084  e3a02002          MOV      r2,#2
000088  e5812000          STR      r2,[r1,#0]
;;;796        outp32(REG_JMCR,0x00000000);
00008c  e5810000          STR      r0,[r1,#0]
;;;797        outp32(REG_JMACR, 0x00400000);  //Can't use single buffer
000090  e3a00501          MOV      r0,#0x400000
000094  e5810050          STR      r0,[r1,#0x50]
;;;798    }
000098  e12fff1e          BX       lr
;;;799    
                          ENDP

                  |L11.156|
                          DCD      ||.data||
                  |L11.160|
                          DCD      0xb000a000

                          AREA ||i.jpegIoctl||, CODE, READONLY, ALIGN=2

                  jpegIoctl PROC
;;;926      */
;;;927    VOID jpegIoctl(UINT32 cmd, UINT32 arg0, UINT32 arg1)
000000  e92d40f8          PUSH     {r3-r7,lr}
;;;928    {
;;;929        JPEG_WINDOW_DECODE_T *winDecode;
;;;930        PUINT32 pu32Tmp;
;;;931    
;;;932        switch(cmd) {
;;;933            case JPEG_IOCTL_SET_YADDR:
;;;934                JPEG_SET_YADDR(arg0);
000004  e59f43a0          LDR      r4,|L12.940|
;;;935                break;
;;;936            case JPEG_IOCTL_SET_UADDR:
;;;937                JPEG_SET_UADDR(arg0);
;;;938                break;
;;;939            case JPEG_IOCTL_SET_VADDR:
;;;940                JPEG_SET_VADDR(arg0);
;;;941                break;
;;;942            case JPEG_IOCTL_SET_YSTRIDE:
;;;943                JPEG_SET_YSTRIDE(arg0);
;;;944                break;
;;;945            case JPEG_IOCTL_SET_USTRIDE:
;;;946                JPEG_SET_USTRIDE(arg0);
;;;947                break;
;;;948            case JPEG_IOCTL_SET_VSTRIDE:
;;;949                JPEG_SET_VSTRIDE(arg0);
;;;950                break;
;;;951            case JPEG_IOCTL_SET_BITSTREAM_ADDR:
;;;952                JPEG_SET_BITSTREAM_ADDR(arg0);
;;;953                break;
;;;954            case JPEG_IOCTL_SET_SOURCE_IMAGE_HEIGHT:
;;;955                JPEG_SET_SOURCE_IMAGE_HEIGHT(arg0);
;;;956                break;
;;;957            case JPEG_IOCTL_ENC_SET_HEADER_CONTROL:
;;;958                JPEG_ENC_SET_HEADER_CONTROL(arg0);
;;;959                break;
;;;960            case JPEG_IOCTL_SET_DEFAULT_QTAB:
;;;961                jpegSetQTAB(g_au8QTable0,g_au8QTable1, 0, 2);
;;;962                break;
;;;963            case JPEG_IOCTL_SET_DECODE_MODE:
;;;964                jpegSetDecodeMode(arg0);
;;;965                break;
;;;966            case JPEG_IOCTL_SET_ENCODE_MODE:
;;;967                jpegSetEncodeMode(arg0, arg1);
;;;968                break;
;;;969            case JPEG_IOCTL_SET_DIMENSION:
;;;970                jpegSetDimension(arg0, arg1);
;;;971                break;
;;;972            case JPEG_IOCTL_ENCODE_TRIGGER:
;;;973                jpegEncodeTrigger();
;;;974                if(g_u16ReserveSize != 0) {
000008  e59f53a0          LDR      r5,|L12.944|
00000c  e1a03802          LSL      r3,r2,#16             ;967
000010  e350002b          CMP      r0,#0x2b              ;932
000014  e3a06001          MOV      r6,#1                 ;928
000018  e1a03823          LSR      r3,r3,#16             ;967
00001c  308ff100          ADDCC    pc,pc,r0,LSL #2       ;932
000020  ea00002b          B        |L12.212|
000024  ea000029          B        |L12.208|
000028  ea00002e          B        |L12.232|
00002c  ea00002f          B        |L12.240|
000030  ea000030          B        |L12.248|
000034  ea000031          B        |L12.256|
000038  ea000032          B        |L12.264|
00003c  ea000033          B        |L12.272|
000040  ea000034          B        |L12.280|
000044  ea000039          B        |L12.304|
000048  ea00003b          B        |L12.316|
00004c  ea00003e          B        |L12.332|
000050  ea000042          B        |L12.352|
000054  ea000052          B        |L12.420|
000058  ea000053          B        |L12.428|
00005c  ea000065          B        |L12.504|
000060  ea000066          B        |L12.512|
000064  ea000065          B        |L12.512|
000068  ea000066          B        |L12.520|
00006c  ea000067          B        |L12.528|
000070  ea000071          B        |L12.572|
000074  ea000078          B        |L12.604|
000078  ea000016          B        |L12.216|
00007c  ea000017          B        |L12.224|
000080  ea000085          B        |L12.668|
000084  ea000086          B        |L12.676|
000088  ea000087          B        |L12.684|
00008c  ea000088          B        |L12.692|
000090  ea000089          B        |L12.700|
000094  ea00008e          B        |L12.724|
000098  ea00008f          B        |L12.732|
00009c  ea000096          B        |L12.764|
0000a0  ea000097          B        |L12.772|
0000a4  ea000099          B        |L12.784|
0000a8  ea00009d          B        |L12.804|
0000ac  ea0000a1          B        |L12.824|
0000b0  ea0000a6          B        |L12.848|
0000b4  ea0000ab          B        |L12.872|
0000b8  ea0000ac          B        |L12.880|
0000bc  ea0000af          B        |L12.896|
0000c0  ea0000b0          B        |L12.904|
0000c4  ea0000b2          B        |L12.916|
0000c8  ea0000b3          B        |L12.924|
0000cc  ea0000b4          B        |L12.932|
                  |L12.208|
0000d0  e584107c          STR      r1,[r4,#0x7c]         ;934
                  |L12.212|
;;;975                    UINT32 u32Addr = JPEG_GET_BITSTREAM_ADDR();
;;;976                    outp8(u32Addr + 2,0xFF);
;;;977                    outp8(u32Addr + 3,0xE0);
;;;978                    outp8(u32Addr + 4,((g_u16ReserveSize - 4) & 0xFF00) >> 8);
;;;979                    outp8(u32Addr + 5,(g_u16ReserveSize - 4) & 0xFF);
;;;980                }
;;;981                break;
;;;982            case JPEG_IOCTL_DECODE_TRIGGER:
;;;983                jpegDecodeTrigger();
;;;984                break;
;;;985            case JPEG_IOCTL_WINDOW_DECODE:
;;;986                winDecode = (JPEG_WINDOW_DECODE_T *)arg0;
;;;987                jpegSetWindowDecode(winDecode->u16StartMCUX, winDecode->u16StartMCUY,
;;;988                                    winDecode->u16EndMCUX, winDecode->u16EndMCUY, winDecode->u32Stride);
;;;989                g_u32WindowDec = TRUE;
;;;990                g_u32windowSizeX = winDecode->u32Stride;
;;;991                g_u32windowSizeY =16*(winDecode->u16EndMCUY - winDecode->u16StartMCUY+1);
;;;992    
;;;993                break;
;;;994            case JPEG_IOCTL_SET_DECODE_STRIDE:
;;;995                g_u32Stride = arg0;
;;;996                break;
;;;997            case JPEG_IOCTL_SET_DECODE_DOWNSCALE:
;;;998                g_bScale = TRUE;
;;;999                g_u32ScaleWidth = arg1;
;;;1000               g_u32ScaleHeight = arg0;
;;;1001               break;
;;;1002           case JPEG_IOCTL_SET_ENCODE_UPSCALE:
;;;1003               g_bScale = TRUE;
;;;1004               g_u32ScaleWidth = arg1;
;;;1005               g_u32ScaleHeight = arg0;
;;;1006               break;
;;;1007           case JPEG_IOCTL_SET_HEADERDECODE_CALBACKFUN:
;;;1008               pfnJpegHeaderDecode =(PFN_JPEG_HEADERDECODE_CALLBACK) arg0;
;;;1009               break;
;;;1010           case JPEG_IOCTL_SET_DECINPUTWAIT_CALBACKFUN:
;;;1011               g_InputWait = TRUE;
;;;1012               pfnJpegDecInputWait =(PFN_JPEG_DECWAIT_CALLBACK) arg0;
;;;1013               JPEG_DEC_SET_INPUT_WAIT(((UINT16) arg1 / 2048));
;;;1014               g_u16BufferSize = arg1 / 2;
;;;1015               break;
;;;1016           case JPEG_IOCTL_ADJUST_QTAB:
;;;1017               jpegAdjustQTAB(arg0,((arg1 & 0xFF00) >> 4) ,(arg1 & 0xFF));
;;;1018               break;
;;;1019           case JPEG_IOCTL_ENC_RESERVED_FOR_SOFTWARE:
;;;1020               if(arg0 > 0) {
;;;1021                   UINT32 u32Tmp;
;;;1022   
;;;1023                   u32Tmp = arg0 + 4;
;;;1024                   if(u32Tmp % 2)
;;;1025                       u32Tmp++;
;;;1026                   if((u32Tmp % 4) == 0)
;;;1027                       u32Tmp+=2;
;;;1028                   if(u32Tmp >= 0xFFFF)
;;;1029                       u32Tmp = 65534;
;;;1030   
;;;1031                   outp32(REG_JPSCALU, inp32(REG_JPSCALU) | A_JUMP);
;;;1032                   outp32(JRESERVE, u32Tmp);
;;;1033                   g_u16ReserveSize = u32Tmp;
;;;1034               }
;;;1035               break;
;;;1036           case JPEG_IOCTL_SET_ENCODE_PRIMARY_RESTART_INTERVAL:
;;;1037               outp32(REG_JPRST,arg0);
;;;1038               break;
;;;1039           case JPEG_IOCTL_SET_ENCODE_THUMBNAIL_RESTART_INTERVAL:
;;;1040               outp32(REG_JTRST,arg0);
;;;1041               break;
;;;1042           case JPEG_IOCTL_GET_ENCODE_PRIMARY_RESTART_INTERVAL:
;;;1043               pu32Tmp = (PUINT32) arg0;
;;;1044               *pu32Tmp = inp32(REG_JPRST);
;;;1045               break;
;;;1046           case JPEG_IOCTL_GET_ENCODE_THUMBNAIL_RESTART_INTERVAL:
;;;1047               pu32Tmp = (PUINT32) arg0;
;;;1048               *pu32Tmp = inp32(REG_JTRST);
;;;1049               break;
;;;1050   
;;;1051           case JPEG_IOCTL_SET_THUMBNAIL_DIMENSION:
;;;1052               outp32(REG_JTHBWH,((arg0 & 0x1FFF)<<16) | (arg1 & 0x1FFF) );
;;;1053               break;
;;;1054           case JPEG_IOCTL_SET_ENCODE_SW_OFFSET:
;;;1055               outp32(REG_JOFFSET, arg0);
;;;1056               break;
;;;1057           case JPEG_IOCTL_GET_THUMBNAIL_DIMENSION:
;;;1058               pu32Tmp = (PUINT32) arg0;
;;;1059               *pu32Tmp = inp32(REG_JTHBWH) >> 16;
;;;1060               pu32Tmp = (PUINT32) arg1;
;;;1061               *pu32Tmp = inp32(REG_JTHBWH) & 0x1FFF;
;;;1062               break;
;;;1063           case JPEG_IOCTL_GET_ENCODE_SW_OFFSET:
;;;1064               pu32Tmp = (PUINT32) arg0;
;;;1065               *pu32Tmp = inp32(REG_JOFFSET);
;;;1066               break;
;;;1067           case JPEG_IOCTL_SET_ENCODE_PRIMARY_DOWNSCALE:
;;;1068               g_bScale = TRUE;
;;;1069               g_bEncPrimaryDownScale = TRUE;
;;;1070               g_u32ScaleWidth = arg1;
;;;1071               g_u32ScaleHeight = arg0;
;;;1072               break;
;;;1073           case JPEG_IOCTL_SET_ENCODE_THUMBNAIL_DOWNSCALE:
;;;1074               g_bScale = TRUE;
;;;1075               g_bEncThumbnailDownScale = TRUE;
;;;1076               g_u32ScaleWidth = arg1;
;;;1077               g_u32ScaleHeight = arg0;
;;;1078               break;
;;;1079           case JPEG_IOCTL_SET_ENCODE_PRIMARY_ROTATE_RIGHT:
;;;1080               g_u32EncRotate = JPEG_IOCTL_SET_ENCODE_PRIMARY_ROTATE_RIGHT;
;;;1081               outp32(REG_JITCR, (inp32(REG_JITCR) & ~ROTATE) | ROTATE);
;;;1082               break;
;;;1083           case JPEG_IOCTL_SET_ENCODE_PRIMARY_ROTATE_LEFT:
;;;1084               g_u32EncRotate = JPEG_IOCTL_SET_ENCODE_PRIMARY_ROTATE_LEFT;
;;;1085               outp32(REG_JITCR, (inp32(REG_JITCR) & ~ROTATE) | 0x1000);
;;;1086               break;
;;;1087           case JPEG_IOCTL_SET_ENCODE_PRIMARY_ROTATE_NORMAL:
;;;1088               g_u32EncRotate = 0;
;;;1089               outp32(REG_JITCR, (inp32(REG_JITCR) & ~ROTATE));
;;;1090               break;
;;;1091           case JPEG_IOCTL_SET_DECOUTPUTWAIT_CALBACKFUN:
;;;1092               pfnJpegDecOutputWait = (PFN_JPEG_DECWAIT_CALLBACK) arg0;
;;;1093               break;
;;;1094           case JPEG_IOCTL_SET_DECOUTPUTWAIT:
;;;1095               outp32(JYADDR0, arg0);
;;;1096               outp32(JDOWFBS, arg1);
;;;1097               g_OutputWait = TRUE;
;;;1098               break;
;;;1099           case JPEG_IOCTL_GET_DECOUTPUTWAIT_ADDR:
;;;1100               pu32Tmp = (PUINT32) arg0;
;;;1101               *pu32Tmp = inp32(JYADDR0);
;;;1102               break;
;;;1103           case JPEG_IOCTL_GET_DECOUTPUTWAIT_SIZE:
;;;1104               pu32Tmp = (PUINT32) arg0;
;;;1105               *pu32Tmp = inp32(JDOWFBS);
;;;1106               break;
;;;1107           case JPEG_IOCTL_SET_DECODE_COMPLETE_CALBACKFUN:
;;;1108               pfnJpegDecodeComplete = (PFN_JPEG_CALLBACK) arg0;
;;;1109               break;
;;;1110           case JPEG_IOCTL_SET_ENCODE_COMPLETE_CALBACKFUN:
;;;1111               pfnJpegEncodeComplete = (PFN_JPEG_CALLBACK) arg0;
;;;1112               break;
;;;1113           case JPEG_IOCTL_SET_DECODE_ERROR_CALBACKFUN:
;;;1114               pfnJpegDecodeError = (PFN_JPEG_CALLBACK) arg0;
;;;1115               break;
;;;1116           default:
;;;1117               break;
;;;1118       }
;;;1119   }
0000d4  e8bd80f8          POP      {r3-r7,pc}
                  |L12.216|
0000d8  e5841080          STR      r1,[r4,#0x80]         ;937
0000dc  e8bd80f8          POP      {r3-r7,pc}
                  |L12.224|
0000e0  e5841084          STR      r1,[r4,#0x84]         ;940
0000e4  e8bd80f8          POP      {r3-r7,pc}
                  |L12.232|
0000e8  e5841094          STR      r1,[r4,#0x94]         ;943
0000ec  e8bd80f8          POP      {r3-r7,pc}
                  |L12.240|
0000f0  e5841098          STR      r1,[r4,#0x98]         ;946
0000f4  e8bd80f8          POP      {r3-r7,pc}
                  |L12.248|
0000f8  e584109c          STR      r1,[r4,#0x9c]         ;949
0000fc  e8bd80f8          POP      {r3-r7,pc}
                  |L12.256|
000100  e58410a0          STR      r1,[r4,#0xa0]         ;952
000104  e8bd80f8          POP      {r3-r7,pc}
                  |L12.264|
000108  e58410b8          STR      r1,[r4,#0xb8]         ;955
00010c  e8bd80f8          POP      {r3-r7,pc}
                  |L12.272|
000110  e5841004          STR      r1,[r4,#4]            ;958
000114  e8bd80f8          POP      {r3-r7,pc}
                  |L12.280|
000118  e59f1294          LDR      r1,|L12.948|
00011c  e3a03002          MOV      r3,#2                 ;961
000120  e3a02000          MOV      r2,#0                 ;961
000124  e2410040          SUB      r0,r1,#0x40           ;961
000128  ebfffffe          BL       jpegSetQTAB
00012c  e8bd80f8          POP      {r3-r7,pc}
                  |L12.304|
000130  e1a00001          MOV      r0,r1                 ;964
000134  ebfffffe          BL       jpegSetDecodeMode
000138  e8bd80f8          POP      {r3-r7,pc}
                  |L12.316|
00013c  e20100ff          AND      r0,r1,#0xff           ;967
000140  e1a01003          MOV      r1,r3                 ;967
000144  ebfffffe          BL       jpegSetEncodeMode
000148  e8bd80f8          POP      {r3-r7,pc}
                  |L12.332|
00014c  e1a00801          LSL      r0,r1,#16             ;970
000150  e1a00820          LSR      r0,r0,#16             ;970
000154  e1a01003          MOV      r1,r3                 ;970
000158  ebfffffe          BL       jpegSetDimension
00015c  e8bd80f8          POP      {r3-r7,pc}
                  |L12.352|
000160  ebfffffe          BL       jpegEncodeTrigger
000164  e1d500ba          LDRH     r0,[r5,#0xa]          ;974  ; g_u16ReserveSize
000168  e3500000          CMP      r0,#0                 ;974
00016c  08bd80f8          POPEQ    {r3-r7,pc}
000170  e59400a0          LDR      r0,[r4,#0xa0]         ;975
000174  e3a010ff          MOV      r1,#0xff              ;976
000178  e5c01002          STRB     r1,[r0,#2]            ;976
00017c  e3a010e0          MOV      r1,#0xe0              ;977
000180  e5c01003          STRB     r1,[r0,#3]            ;977
000184  e1d510ba          LDRH     r1,[r5,#0xa]          ;978  ; g_u16ReserveSize
000188  e2411004          SUB      r1,r1,#4              ;978
00018c  e1a01421          LSR      r1,r1,#8              ;978
000190  e5c01004          STRB     r1,[r0,#4]            ;978
000194  e1d510ba          LDRH     r1,[r5,#0xa]          ;979  ; g_u16ReserveSize
000198  e2411004          SUB      r1,r1,#4              ;979
00019c  e5c01005          STRB     r1,[r0,#5]            ;979
0001a0  e8bd80f8          POP      {r3-r7,pc}
                  |L12.420|
0001a4  ebfffffe          BL       jpegDecodeTrigger
0001a8  e8bd80f8          POP      {r3-r7,pc}
                  |L12.428|
0001ac  e5910008          LDR      r0,[r1,#8]            ;987
0001b0  e1a04001          MOV      r4,r1                 ;986
0001b4  e58d0000          STR      r0,[sp,#0]            ;987
0001b8  e1d1c0b2          LDRH     r12,[r1,#2]           ;987
0001bc  e1d130b6          LDRH     r3,[r1,#6]            ;987
0001c0  e1d120b4          LDRH     r2,[r1,#4]            ;987
0001c4  e1d100b0          LDRH     r0,[r1,#0]            ;987
0001c8  e1a0100c          MOV      r1,r12                ;987
0001cc  ebfffffe          BL       jpegSetWindowDecode
0001d0  e5c56005          STRB     r6,[r5,#5]            ;989  ; g_u32WindowDec
0001d4  e5940008          LDR      r0,[r4,#8]            ;990
0001d8  e5850044          STR      r0,[r5,#0x44]         ;990  ; g_u32windowSizeX
0001dc  e1d400b6          LDRH     r0,[r4,#6]            ;991
0001e0  e1d410b2          LDRH     r1,[r4,#2]            ;991
0001e4  e0400001          SUB      r0,r0,r1              ;991
0001e8  e1a00200          LSL      r0,r0,#4              ;991
0001ec  e2800010          ADD      r0,r0,#0x10           ;991
0001f0  e5850048          STR      r0,[r5,#0x48]         ;991  ; g_u32windowSizeY
0001f4  e8bd80f8          POP      {r3-r7,pc}
                  |L12.504|
0001f8  e5851028          STR      r1,[r5,#0x28]         ;995  ; g_u32Stride
0001fc  e8bd80f8          POP      {r3-r7,pc}
                  |L12.512|
000200  e5c56002          STRB     r6,[r5,#2]            ;998  ; g_bScale
000204  ea000043          B        |L12.792|
                  |L12.520|
000208  e585101c          STR      r1,[r5,#0x1c]         ;1008  ; pfnJpegHeaderDecode
00020c  e8bd80f8          POP      {r3-r7,pc}
                  |L12.528|
000210  e5c56004          STRB     r6,[r5,#4]            ;1011  ; g_InputWait
000214  e3a00c1f          MOV      r0,#0x1f00            ;1013
000218  e00001a2          AND      r0,r0,r2,LSR #3       ;1013
00021c  e3800501          ORR      r0,r0,#0x400000       ;1013
000220  e3800008          ORR      r0,r0,#8              ;1013
000224  e5851020          STR      r1,[r5,#0x20]         ;1013  ; pfnJpegDecInputWait
000228  e5840050          STR      r0,[r4,#0x50]         ;1013
00022c  e1a00782          LSL      r0,r2,#15             ;1014
000230  e1a00820          LSR      r0,r0,#16             ;1014
000234  e1c500b8          STRH     r0,[r5,#8]            ;1014  ; g_u16BufferSize
000238  e8bd80f8          POP      {r3-r7,pc}
                  |L12.572|
00023c  e3a000f0          MOV      r0,#0xf0              ;1017
000240  e0003222          AND      r3,r0,r2,LSR #4       ;1017
000244  e202c0ff          AND      r12,r2,#0xff          ;1017
000248  e20100ff          AND      r0,r1,#0xff           ;1017
00024c  e1a0200c          MOV      r2,r12                ;1017
000250  e1a01003          MOV      r1,r3                 ;1017
000254  ebfffffe          BL       jpegAdjustQTAB
000258  e8bd80f8          POP      {r3-r7,pc}
                  |L12.604|
00025c  e3510000          CMP      r1,#0                 ;1020
000260  08bd80f8          POPEQ    {r3-r7,pc}
000264  e2810004          ADD      r0,r1,#4              ;1023
000268  e3100001          TST      r0,#1                 ;1024
00026c  12800001          ADDNE    r0,r0,#1              ;1024
000270  e59f1140          LDR      r1,|L12.952|
000274  e3100003          TST      r0,#3                 ;1026
000278  02800002          ADDEQ    r0,r0,#2              ;1026
00027c  e1500001          CMP      r0,r1                 ;1028
000280  22410001          SUBCS    r0,r1,#1              ;1029
000284  e5941054          LDR      r1,[r4,#0x54]         ;1031
000288  e3811004          ORR      r1,r1,#4              ;1031
00028c  e5841054          STR      r1,[r4,#0x54]         ;1031
000290  e5840070          STR      r0,[r4,#0x70]         ;1032
000294  e1c500ba          STRH     r0,[r5,#0xa]          ;1033  ; g_u16ReserveSize
000298  e8bd80f8          POP      {r3-r7,pc}
                  |L12.668|
00029c  e5841020          STR      r1,[r4,#0x20]         ;1037
0002a0  e8bd80f8          POP      {r3-r7,pc}
                  |L12.676|
0002a4  e5841024          STR      r1,[r4,#0x24]         ;1040
0002a8  e8bd80f8          POP      {r3-r7,pc}
                  |L12.684|
0002ac  e5940020          LDR      r0,[r4,#0x20]         ;1044
0002b0  ea000035          B        |L12.908|
                  |L12.692|
0002b4  e5940024          LDR      r0,[r4,#0x24]         ;1048
0002b8  ea000033          B        |L12.908|
                  |L12.700|
0002bc  e1a00982          LSL      r0,r2,#19             ;1052
0002c0  e1a009a0          LSR      r0,r0,#19             ;1052
0002c4  e3c11a0e          BIC      r1,r1,#0xe000         ;1052
0002c8  e1800801          ORR      r0,r0,r1,LSL #16      ;1052
0002cc  e584001c          STR      r0,[r4,#0x1c]         ;1052
0002d0  e8bd80f8          POP      {r3-r7,pc}
                  |L12.724|
0002d4  e5841074          STR      r1,[r4,#0x74]         ;1055
0002d8  e8bd80f8          POP      {r3-r7,pc}
                  |L12.732|
0002dc  e594001c          LDR      r0,[r4,#0x1c]         ;1059
0002e0  e1a00820          LSR      r0,r0,#16             ;1059
0002e4  e5810000          STR      r0,[r1,#0]            ;1061
0002e8  e594001c          LDR      r0,[r4,#0x1c]         ;1061
0002ec  e1a00980          LSL      r0,r0,#19             ;1061
0002f0  e1a009a0          LSR      r0,r0,#19             ;1061
0002f4  e5820000          STR      r0,[r2,#0]            ;1061
0002f8  e8bd80f8          POP      {r3-r7,pc}
                  |L12.764|
0002fc  e5940074          LDR      r0,[r4,#0x74]         ;1065
000300  ea000021          B        |L12.908|
                  |L12.772|
000304  e5c56002          STRB     r6,[r5,#2]            ;1068  ; g_bScale
000308  e5c56007          STRB     r6,[r5,#7]            ;1069  ; g_bEncPrimaryDownScale
00030c  ea000001          B        |L12.792|
                  |L12.784|
000310  e5c56002          STRB     r6,[r5,#2]            ;1074  ; g_bScale
000314  e5c56006          STRB     r6,[r5,#6]            ;1075  ; g_bEncThumbnailDownScale
                  |L12.792|
000318  e585202c          STR      r2,[r5,#0x2c]         ;1076  ; g_u32ScaleWidth
00031c  e5851030          STR      r1,[r5,#0x30]         ;1077  ; g_u32ScaleHeight
000320  e8bd80f8          POP      {r3-r7,pc}
                  |L12.804|
000324  e3a00021          MOV      r0,#0x21              ;1080
000328  e585000c          STR      r0,[r5,#0xc]          ;1080  ; g_u32EncRotate
00032c  e5940008          LDR      r0,[r4,#8]            ;1081
000330  e3800b06          ORR      r0,r0,#0x1800         ;1081
000334  ea000009          B        |L12.864|
                  |L12.824|
000338  e3a00022          MOV      r0,#0x22              ;1084
00033c  e585000c          STR      r0,[r5,#0xc]          ;1084  ; g_u32EncRotate
000340  e5940008          LDR      r0,[r4,#8]            ;1085
000344  e3c00b06          BIC      r0,r0,#0x1800         ;1085
000348  e3800a01          ORR      r0,r0,#0x1000         ;1085
00034c  ea000003          B        |L12.864|
                  |L12.848|
000350  e3a00000          MOV      r0,#0                 ;1088
000354  e585000c          STR      r0,[r5,#0xc]          ;1088  ; g_u32EncRotate
000358  e5940008          LDR      r0,[r4,#8]            ;1089
00035c  e3c00b06          BIC      r0,r0,#0x1800         ;1089
                  |L12.864|
000360  e5840008          STR      r0,[r4,#8]            ;1089
000364  e8bd80f8          POP      {r3-r7,pc}
                  |L12.872|
000368  e5851024          STR      r1,[r5,#0x24]         ;1092  ; pfnJpegDecOutputWait
00036c  e8bd80f8          POP      {r3-r7,pc}
                  |L12.880|
000370  e584107c          STR      r1,[r4,#0x7c]         ;1095
000374  e584203c          STR      r2,[r4,#0x3c]         ;1096
000378  e5c56003          STRB     r6,[r5,#3]            ;1097  ; g_OutputWait
00037c  e8bd80f8          POP      {r3-r7,pc}
                  |L12.896|
000380  e594007c          LDR      r0,[r4,#0x7c]         ;1101
000384  ea000000          B        |L12.908|
                  |L12.904|
000388  e594003c          LDR      r0,[r4,#0x3c]         ;1105
                  |L12.908|
00038c  e5810000          STR      r0,[r1,#0]            ;1105
000390  e8bd80f8          POP      {r3-r7,pc}
                  |L12.916|
000394  e5851010          STR      r1,[r5,#0x10]         ;1108  ; pfnJpegDecodeComplete
000398  e8bd80f8          POP      {r3-r7,pc}
                  |L12.924|
00039c  e5851018          STR      r1,[r5,#0x18]         ;1111  ; pfnJpegEncodeComplete
0003a0  e8bd80f8          POP      {r3-r7,pc}
                  |L12.932|
0003a4  e5851014          STR      r1,[r5,#0x14]         ;1114  ; pfnJpegDecodeError
0003a8  e8bd80f8          POP      {r3-r7,pc}
;;;1120   
                          ENDP

                  |L12.940|
                          DCD      0xb000a000
                  |L12.944|
                          DCD      ||.data||
                  |L12.948|
                          DCD      ||.data||+0x8c
                  |L12.952|
                          DCD      0x0000ffff

                          AREA ||i.jpegIsReady||, CODE, READONLY, ALIGN=2

                  jpegIsReady PROC
;;;805      */
;;;806    BOOL jpegIsReady(void)
000000  e59f0010          LDR      r0,|L13.24|
;;;807    {
;;;808        if (g_bWait == FALSE)
000004  e5d00000          LDRB     r0,[r0,#0]  ; g_bWait
000008  e3500000          CMP      r0,#0
;;;809            return TRUE;
00000c  03a00001          MOVEQ    r0,#1
;;;810        else
;;;811            return FALSE;
000010  13a00000          MOVNE    r0,#0
;;;812    }
000014  e12fff1e          BX       lr
;;;813    
                          ENDP

                  |L13.24|
                          DCD      ||.data||

                          AREA ||i.jpegOpen||, CODE, READONLY, ALIGN=2

                  jpegOpen PROC
;;;712      */
;;;713    INT jpegOpen(void)
000000  e92d4010          PUSH     {r4,lr}
;;;714    {
;;;715        UINT32 u32JPGDiv;
;;;716        UINT32 u32JPGSource;
;;;717        UINT32  u32HclkHz;
;;;718    
;;;719        // 1.Check I/O pins. If I/O pins are used by other IPs, return error code (check PINFUN)
;;;720        // 2.Enable IPs clock
;;;721        outp32(REG_CLK_HCLKEN, (inp32(REG_CLK_HCLKEN) | (1 << 29))); // Enable JPEG clock
000004  e3a0420b          MOV      r4,#0xb0000000
000008  e5940210          LDR      r0,[r4,#0x210]
00000c  e3800202          ORR      r0,r0,#0x20000000
000010  e5840210          STR      r0,[r4,#0x210]
;;;722    
;;;723        //u32HclkHz =   sysGetHCLK1Clock();
;;;724        u32HclkHz = sysGetClock(SYS_HCLK234) * 1000000;
000014  e3a00005          MOV      r0,#5
000018  ebfffffe          BL       sysGetClock
00001c  e59f107c          LDR      r1,|L14.160|
000020  e0000091          MUL      r0,r1,r0
;;;725        u32JPGSource = u32HclkHz / (((inp32(REG_CLK_DIVCTL3) & 0xf0000000) >> 28) + 1);
000024  e594122c          LDR      r1,[r4,#0x22c]
000028  e3a02001          MOV      r2,#1
00002c  e0821e21          ADD      r1,r2,r1,LSR #28
000030  ebfffffe          BL       __aeabi_uidivmod
;;;726    
;;;727        u32JPGDiv = 0;
;;;728    
;;;729        if(u32JPGSource > 75000000)
000034  e59f1068          LDR      r1,|L14.164|
000038  e1a02000          MOV      r2,r0                 ;725
00003c  e1520001          CMP      r2,r1
000040  e3a00000          MOV      r0,#0                 ;727
000044  9a000003          BLS      |L14.88|
;;;730        {
;;;731            if(u32JPGSource % 75000000)
000048  e1a00002          MOV      r0,r2
00004c  ebfffffe          BL       __aeabi_uidivmod
000050  e3510000          CMP      r1,#0
000054  02400001          SUBEQ    r0,r0,#1
                  |L14.88|
;;;732            {
;;;733                u32JPGDiv = (u32JPGSource / 75000000);
;;;734            }
;;;735            else
;;;736                u32JPGDiv = (u32JPGSource / 75000000) - 1;
;;;737        }
;;;738        outp32(REG_CLK_DIVCTL3, (inp32(REG_CLK_DIVCTL3) & ~(0xf0000000)) | ((u32JPGDiv & 0xf) << 28));
000058  e594122c          LDR      r1,[r4,#0x22c]
00005c  e3c1120f          BIC      r1,r1,#0xf0000000
000060  e1810e00          ORR      r0,r1,r0,LSL #28
000064  e584022c          STR      r0,[r4,#0x22c]
;;;739    
;;;740        //sysprintf("jpeg engine is %dHz\n",u32JPGSource / (u32JPGDiv+1));
;;;741    
;;;742        // 3.Reset IP
;;;743        outp32(REG_SYS_AHBIPRST, (1 << 22));  // JPEG IP Reset
000068  e3a00501          MOV      r0,#0x400000
00006c  e5840060          STR      r0,[r4,#0x60]
;;;744        outp32(REG_SYS_AHBIPRST, 0);
000070  e3a00000          MOV      r0,#0
000074  e5840060          STR      r0,[r4,#0x60]
;;;745        // 4.Configure IP according to inputted arguments (check CLKSEL)
;;;746        sysInstallISR((IRQ_LEVEL_1 | HIGH_LEVEL_SENSITIVE), JPEG_IRQn, (PVOID)jpegISR);
000078  e59f2028          LDR      r2,|L14.168|
00007c  e3a01021          MOV      r1,#0x21
000080  e3a00041          MOV      r0,#0x41
000084  ebfffffe          BL       sysInstallISR
;;;747        sysSetLocalInterrupt(ENABLE_IRQ);
000088  e3a0007f          MOV      r0,#0x7f
00008c  ebfffffe          BL       sysSetLocalInterrupt
;;;748        sysEnableInterrupt(JPEG_IRQn);
000090  e3a00021          MOV      r0,#0x21
000094  ebfffffe          BL       sysEnableInterrupt
;;;749        // 5.Enable IP I/O pins
;;;750        // 6.Return E_SUCCESS to present success
;;;751        return E_SUCCESS;
000098  e3a00001          MOV      r0,#1
;;;752    }
00009c  e8bd8010          POP      {r4,pc}
;;;753    
                          ENDP

                  |L14.160|
                          DCD      0x000f4240
                  |L14.164|
                          DCD      0x047868c0
                  |L14.168|
                          DCD      jpegISR

                          AREA ||i.jpegPollInt||, CODE, READONLY, ALIGN=2

                  jpegPollInt PROC
;;;328    //Poll the interrupt status and get if the interrupt is generated
;;;329    BOOL jpegPollInt(UINT32 u32Intflag)
000000  e59f1014          LDR      r1,|L15.28|
;;;330    {
;;;331        if(JPEG_GET_INT_STATUS() & u32Intflag)
000004  e591102c          LDR      r1,[r1,#0x2c]
000008  e0000001          AND      r0,r0,r1
00000c  e59f100c          LDR      r1,|L15.32|
000010  e0100001          ANDS     r0,r0,r1
;;;332            return 1;
000014  13a00001          MOVNE    r0,#1
;;;333        else
;;;334            return 0;
;;;335    }
000018  e12fff1e          BX       lr
;;;336    
                          ENDP

                  |L15.28|
                          DCD      0xb000a000
                  |L15.32|
                          DCD      0x010000ff

                          AREA ||i.jpegPower||, CODE, READONLY, ALIGN=2

                  jpegPower PROC
;;;351    
;;;352    UINT32 jpegPower(UINT32 u32Index, UINT32 u32Exp)
000000  e3510000          CMP      r1,#0
;;;353    {
;;;354        if(u32Exp==0)
;;;355            return 1;
000004  03a00001          MOVEQ    r0,#1
;;;356        else {
;;;357            UINT32 u32Idx;
;;;358            for(u32Idx=1; u32Idx<u32Exp; u32Idx = u32Idx+1) {
000008  13a02001          MOVNE    r2,#1
;;;359                u32Index = 2 * u32Index;
;;;360            }
;;;361        }
;;;362        return u32Index;
;;;363    }
00000c  012fff1e          BXEQ     lr
                  |L16.16|
000010  e1520001          CMP      r2,r1                 ;358
000014  31a00080          LSLCC    r0,r0,#1              ;359
000018  32822001          ADDCC    r2,r2,#1              ;359
00001c  3afffffb          BCC      |L16.16|
000020  e12fff1e          BX       lr
;;;364    
                          ENDP


                          AREA ||i.jpegSetDecodeMode||, CODE, READONLY, ALIGN=2

                  jpegSetDecodeMode PROC
;;;412    
;;;413    INT jpegSetDecodeMode(UINT32 u32OutputFormat)
000000  e59f30c0          LDR      r3,|L17.200|
;;;414    {
;;;415        switch(u32OutputFormat) {
000004  e1500003          CMP      r0,r3
000008  e0401003          SUB      r1,r0,r3
00000c  0a00001d          BEQ      |L17.136|
000010  ca00000d          BGT      |L17.76|
000014  e59f20b0          LDR      r2,|L17.204|
000018  e1500002          CMP      r0,r2
00001c  e0401002          SUB      r1,r0,r2
000020  c2811010          ADDGT    r1,r1,#0x10
000024  c2411a02          SUBGT    r1,r1,#0x2000
000028  0a000016          BEQ      |L17.136|
00002c  ca000012          BGT      |L17.124|
000030  e3500021          CMP      r0,#0x21
000034  13500031          CMPNE    r0,#0x31
000038  12401901          SUBNE    r1,r0,#0x4000
00003c  12511021          SUBSNE   r1,r1,#0x21
000040  0a000010          BEQ      |L17.136|
                  |L17.68|
;;;416            case JPEG_DEC_PRIMARY_PLANAR_YUV:
;;;417            case JPEG_DEC_PRIMARY_PACKET_YUV422:
;;;418            case JPEG_DEC_PRIMARY_PACKET_RGB555:
;;;419            case JPEG_DEC_PRIMARY_PACKET_RGB555R1:
;;;420            case JPEG_DEC_PRIMARY_PACKET_RGB555R2:
;;;421            case JPEG_DEC_THUMBNAIL_PLANAR_YUV:
;;;422            case JPEG_DEC_THUMBNAIL_PACKET_YUV422:
;;;423            case JPEG_DEC_THUMBNAIL_PACKET_RGB555:
;;;424            case JPEG_DEC_PRIMARY_PACKET_RGB565:
;;;425            case JPEG_DEC_PRIMARY_PACKET_RGB565R1:
;;;426            case JPEG_DEC_PRIMARY_PACKET_RGB565R2:
;;;427            case JPEG_DEC_PRIMARY_PACKET_RGB888:
;;;428                outp32(REG_JITCR, u32OutputFormat);
;;;429                outp32(REG_JMCR,inp32(REG_JMCR) & ~ENC_DEC);
;;;430                g_u32OpMode = JPEG_DEC_PACKET_DOWNSCALE_MODE;
;;;431                g_u32OutputFormat = u32OutputFormat;
;;;432                if(u32OutputFormat == JPEG_DEC_PRIMARY_PLANAR_YUV || u32OutputFormat == JPEG_DEC_THUMBNAIL_PLANAR_YUV)
;;;433                    g_u32OpMode = JPEG_DEC_PLANAR_DOWNSCALE_MODE;
;;;434                break;
;;;435            default:
;;;436                return E_JPEG_INVALID_PARAM;
000044  e3a00002          MOV      r0,#2
;;;437        }
;;;438        return E_SUCCESS;
;;;439    }
000048  e12fff1e          BX       lr
                  |L17.76|
00004c  e59f207c          LDR      r2,|L17.208|
000050  e1510002          CMP      r1,r2                 ;415
000054  e041c002          SUB      r12,r1,r2             ;415
000058  c24c1603          SUBGT    r1,r12,#0x300000      ;415
00005c  c2411afe          SUBGT    r1,r1,#0xfe000        ;415
000060  0a000008          BEQ      |L17.136|
000064  ca000004          BGT      |L17.124|
000068  e2811010          ADD      r1,r1,#0x10           ;415
00006c  e2511903          SUBS     r1,r1,#0xc000         ;415
000070  1351083f          CMPNE    r1,#0x3f0000          ;415
000074  1afffff2          BNE      |L17.68|
000078  ea000002          B        |L17.136|
                  |L17.124|
00007c  e3510000          CMP      r1,#0                 ;415
000080  13510a02          CMPNE    r1,#0x2000            ;415
000084  1affffee          BNE      |L17.68|
                  |L17.136|
000088  e59f1044          LDR      r1,|L17.212|
00008c  e5810008          STR      r0,[r1,#8]            ;428
000090  e5912000          LDR      r2,[r1,#0]            ;429
000094  e3c22080          BIC      r2,r2,#0x80           ;429
000098  e5812000          STR      r2,[r1,#0]            ;429
00009c  e59f1034          LDR      r1,|L17.216|
0000a0  e3a02001          MOV      r2,#1                 ;430
0000a4  e5812034          STR      r2,[r1,#0x34]         ;430  ; g_u32OpMode
0000a8  e5810040          STR      r0,[r1,#0x40]         ;431  ; g_u32OutputFormat
0000ac  e2402902          SUB      r2,r0,#0x8000         ;432
0000b0  e2522021          SUBS     r2,r2,#0x21           ;432
0000b4  11500003          CMPNE    r0,r3                 ;432
0000b8  03a00002          MOVEQ    r0,#2                 ;433
0000bc  05810034          STREQ    r0,[r1,#0x34]         ;433  ; g_u32OpMode
0000c0  e3a00001          MOV      r0,#1                 ;438
0000c4  e12fff1e          BX       lr
;;;440    
                          ENDP

                  |L17.200|
                          DCD      0x00008031
                  |L17.204|
                          DCD      0x00004031
                  |L17.208|
                          DCD      0x003fdff0
                  |L17.212|
                          DCD      0xb000a000
                  |L17.216|
                          DCD      ||.data||

                          AREA ||i.jpegSetDimension||, CODE, READONLY, ALIGN=2

                  jpegSetDimension PROC
;;;646    
;;;647    VOID jpegSetDimension(
000000  e3c11a0e          BIC      r1,r1,#0xe000
;;;648        UINT16 u16Height,           //Decode/Encode Height
;;;649        UINT16 u16Width             //Decode/Encode Width
;;;650    )
;;;651    {
;;;652        outp32(REG_JPRIWH,((u16Height & 0x1FFF)<<16) | (u16Width & 0x1FFF) );
000004  e3c00a0e          BIC      r0,r0,#0xe000
000008  e1810800          ORR      r0,r1,r0,LSL #16
00000c  e59f1004          LDR      r1,|L18.24|
000010  e5810018          STR      r0,[r1,#0x18]
;;;653    }
000014  e12fff1e          BX       lr
;;;654    
                          ENDP

                  |L18.24|
                          DCD      0xb000a000

                          AREA ||i.jpegSetEncodeMode||, CODE, READONLY, ALIGN=2

                  jpegSetEncodeMode PROC
;;;365    
;;;366    INT jpegSetEncodeMode(UINT8 u8SourceFormat, UINT16 u16JpegFormat)
000000  e59f20e4          LDR      r2,|L19.236|
;;;367    {
;;;368        UINT8 u8Gray = 0;
;;;369        switch(u16JpegFormat) {
000004  e35100a1          CMP      r1,#0xa1
000008  e3a03000          MOV      r3,#0                 ;368
00000c  0a000026          BEQ      |L19.172|
000010  ca000007          BGT      |L19.52|
000014  e3510090          CMP      r1,#0x90
000018  0a00000c          BEQ      |L19.80|
00001c  e3510091          CMP      r1,#0x91
000020  0a000021          BEQ      |L19.172|
000024  e3510098          CMP      r1,#0x98
000028  135100a0          CMPNE    r1,#0xa0
00002c  0a000007          BEQ      |L19.80|
000030  ea00001b          B        |L19.164|
                  |L19.52|
000034  e35100a8          CMP      r1,#0xa8
000038  135100b0          CMPNE    r1,#0xb0
00003c  0a000003          BEQ      |L19.80|
000040  e35100b1          CMP      r1,#0xb1
000044  0a000018          BEQ      |L19.172|
000048  e35100b8          CMP      r1,#0xb8
00004c  1a000014          BNE      |L19.164|
                  |L19.80|
;;;370            case JPEG_ENC_PRIMARY_YUV420:
;;;371            case JPEG_ENC_PRIMARY_YUV422:
;;;372            case JPEG_ENC_THUMBNAIL_YUV420:
;;;373            case JPEG_ENC_THUMBNAIL_YUV422:
;;;374            case (JPEG_ENC_PRIMARY_YUV420 | JPEG_ENC_THUMBNAIL_YUV420):
;;;375            case (JPEG_ENC_PRIMARY_YUV422 | JPEG_ENC_THUMBNAIL_YUV422):
;;;376                outp32(REG_JMCR,(inp32(REG_JMCR) & WIN_DEC )| u16JpegFormat);
000050  e592c000          LDR      r12,[r2,#0]
000054  e20cc040          AND      r12,r12,#0x40
000058  e181100c          ORR      r1,r1,r12
00005c  e5821000          STR      r1,[r2,#0]
                  |L19.96|
;;;377                u8Gray = 0;
;;;378                break;
;;;379            case JPEG_ENC_PRIMARY_GRAY:
;;;380            case JPEG_ENC_THUMBNAIL_GRAY:
;;;381            case (JPEG_ENC_PRIMARY_GRAY | JPEG_ENC_THUMBNAIL_GRAY):
;;;382                if(u8SourceFormat == JPEG_ENC_SOURCE_PACKET)
;;;383                    return E_JPEG_INVALID_PARAM;
;;;384                else {
;;;385                    if(u16JpegFormat == (JPEG_ENC_PRIMARY_GRAY | JPEG_ENC_THUMBNAIL_GRAY))
;;;386                        outp32(REG_JMCR, 0xB0);
;;;387                    else
;;;388                        outp32(REG_JMCR, 0xA0);
;;;389                }
;;;390                u8Gray = EY_ONLY;
;;;391                break;
;;;392            default:
;;;393                return E_JPEG_INVALID_PARAM;
;;;394        }
;;;395        g_u32OpMode = JPEG_ENC_UPSCALE_MODE;
000060  e59f1088          LDR      r1,|L19.240|
000064  e3a0c000          MOV      r12,#0
000068  e581c034          STR      r12,[r1,#0x34]  ; g_u32OpMode
;;;396    
;;;397        if(g_bEncPrimaryDownScale)
00006c  e5d1c007          LDRB     r12,[r1,#7]  ; g_bEncPrimaryDownScale
000070  e35c0000          CMP      r12,#0
;;;398            g_u32OpMode = JPEG_ENC_PLANAR_PRIMARY_DOWNSCALE_MODE;
000074  13a0c003          MOVNE    r12,#3
000078  1581c034          STRNE    r12,[r1,#0x34]  ; g_u32OpMode
;;;399    
;;;400        if (g_bEncThumbnailDownScale)
00007c  e5d1c006          LDRB     r12,[r1,#6]  ; g_bEncThumbnailDownScale
000080  e35c0000          CMP      r12,#0
;;;401            g_u32OpMode = JPEG_ENC_PLANAR_THUMBNAIL_DOWNSCALE_MODE;
000084  13a0c004          MOVNE    r12,#4
000088  1581c034          STRNE    r12,[r1,#0x34]  ; g_u32OpMode
;;;402    
;;;403        if(u8SourceFormat == JPEG_ENC_SOURCE_PLANAR)
00008c  e3500000          CMP      r0,#0
000090  0a00000d          BEQ      |L19.204|
;;;404            outp32(REG_JITCR, (inp32(REG_JITCR) & (0x8 | ROTATE)) | PLANAR_ON | u8Gray);
;;;405        else if(u8SourceFormat == JPEG_ENC_SOURCE_PACKET)
000094  e3500001          CMP      r0,#1
;;;406            outp32(REG_JITCR, inp32(REG_JITCR) & ~(PLANAR_ON | ROTATE));
000098  05920008          LDREQ    r0,[r2,#8]
00009c  03c00b26          BICEQ    r0,r0,#0x9800
0000a0  0a00000e          BEQ      |L19.224|
                  |L19.164|
;;;407        else
;;;408            return E_JPEG_INVALID_PARAM;
0000a4  e3a00002          MOV      r0,#2
;;;409    
;;;410        return E_SUCCESS;
;;;411    }
0000a8  e12fff1e          BX       lr
                  |L19.172|
0000ac  e3500001          CMP      r0,#1                 ;382
0000b0  0afffffb          BEQ      |L19.164|
0000b4  e35100b1          CMP      r1,#0xb1              ;385
0000b8  03a010b0          MOVEQ    r1,#0xb0              ;386
0000bc  13a010a0          MOVNE    r1,#0xa0              ;388
0000c0  e5821000          STR      r1,[r2,#0]            ;386
0000c4  e3a03040          MOV      r3,#0x40              ;390
0000c8  eaffffe4          B        |L19.96|
                  |L19.204|
0000cc  e5920008          LDR      r0,[r2,#8]            ;404
0000d0  e59f101c          LDR      r1,|L19.244|
0000d4  e0000001          AND      r0,r0,r1              ;404
0000d8  e1800003          ORR      r0,r0,r3              ;404
0000dc  e3800902          ORR      r0,r0,#0x8000         ;404
                  |L19.224|
0000e0  e5820008          STR      r0,[r2,#8]            ;406
0000e4  e3a00001          MOV      r0,#1                 ;410
0000e8  e12fff1e          BX       lr
;;;412    
                          ENDP

                  |L19.236|
                          DCD      0xb000a000
                  |L19.240|
                          DCD      ||.data||
                  |L19.244|
                          DCD      0x00001808

                          AREA ||i.jpegSetQTAB||, CODE, READONLY, ALIGN=2

                  jpegSetQTAB PROC
;;;855      */
;;;856    INT jpegSetQTAB(PUINT8 puQTable0, PUINT8 puQTable1, PUINT8 puQTable2, UINT8 u8num)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;857    {
;;;858        UINT32 u32value;
;;;859        UINT32 u32TimeOut;
;;;860        int i;
;;;861    
;;;862        u32TimeOut = 0xFFFFFF;
;;;863        for(i = 0; i < 64; i=i+4) {
;;;864            while((inp32(REG_JMCR) & QT_BUSY) & u32TimeOut)
000004  e59f6148          LDR      r6,|L20.340|
000008  e3e044ff          MVN      r4,#0xff000000        ;862
00000c  e3a0c000          MOV      r12,#0                ;863
                  |L20.16|
000010  e5965000          LDR      r5,[r6,#0]
000014  e0055004          AND      r5,r5,r4
000018  e3150004          TST      r5,#4
00001c  12444001          SUBNE    r4,r4,#1
000020  1afffffa          BNE      |L20.16|
;;;865                u32TimeOut--;
;;;866    
;;;867            if(!u32TimeOut)
000024  e3540000          CMP      r4,#0
000028  0a000047          BEQ      |L20.332|
;;;868                return E_JPEG_TIMEOUT;
;;;869    
;;;870            u32value = puQTable0[i] | (puQTable0[i+1]<<8) | (puQTable0[i+2]<<16) | (puQTable0[i+3]<<24);
00002c  e080500c          ADD      r5,r0,r12
000030  e7d0700c          LDRB     r7,[r0,r12]
000034  e5d58001          LDRB     r8,[r5,#1]
000038  e1877408          ORR      r7,r7,r8,LSL #8
00003c  e5d58002          LDRB     r8,[r5,#2]
000040  e5d55003          LDRB     r5,[r5,#3]
000044  e1877808          ORR      r7,r7,r8,LSL #16
000048  e1875c05          ORR      r5,r7,r5,LSL #24
;;;871            outp32((REG_JQTAB0 + i),u32value);
00004c  e08c7006          ADD      r7,r12,r6
000050  e5875100          STR      r5,[r7,#0x100]
000054  e28cc004          ADD      r12,r12,#4
000058  e35c0040          CMP      r12,#0x40             ;863
;;;872        }
;;;873    
;;;874        u32TimeOut = 0xFFFFFF;
00005c  a3e0c4ff          MVNGE    r12,#0xff000000
;;;875        for(i = 0; i < 64; i=i+4) {
000060  a3a00000          MOVGE    r0,#0
000064  baffffe9          BLT      |L20.16|
                  |L20.104|
;;;876            while((inp32(REG_JMCR) & QT_BUSY) & u32TimeOut)
000068  e5964000          LDR      r4,[r6,#0]
00006c  e004400c          AND      r4,r4,r12
000070  e3140004          TST      r4,#4
000074  124cc001          SUBNE    r12,r12,#1
000078  1afffffa          BNE      |L20.104|
;;;877                u32TimeOut--;
;;;878    
;;;879            if(!u32TimeOut)
00007c  e35c0000          CMP      r12,#0
000080  0a000031          BEQ      |L20.332|
;;;880                return E_JPEG_TIMEOUT;
;;;881    
;;;882            u32value = puQTable1[i] | (puQTable1[i+1]<<8) | (puQTable1[i+2]<<16) | (puQTable1[i+3]<<24);
000084  e0814000          ADD      r4,r1,r0
000088  e7d15000          LDRB     r5,[r1,r0]
00008c  e5d47001          LDRB     r7,[r4,#1]
000090  e1855407          ORR      r5,r5,r7,LSL #8
000094  e5d47002          LDRB     r7,[r4,#2]
000098  e5d44003          LDRB     r4,[r4,#3]
00009c  e1855807          ORR      r5,r5,r7,LSL #16
0000a0  e1854c04          ORR      r4,r5,r4,LSL #24
;;;883            outp32((REG_JQTAB1 + i),u32value);
0000a4  e0805006          ADD      r5,r0,r6
0000a8  e5854140          STR      r4,[r5,#0x140]
0000ac  e2800004          ADD      r0,r0,#4
0000b0  e3500040          CMP      r0,#0x40              ;875
0000b4  baffffeb          BLT      |L20.104|
;;;884        }
;;;885    
;;;886        if (u8num <3)
0000b8  e3530003          CMP      r3,#3
0000bc  3a000020          BCC      |L20.324|
;;;887            return E_SUCCESS;
;;;888    
;;;889        outp32(JITCR, inp32(JITCR) | 0x8);
0000c0  e5960008          LDR      r0,[r6,#8]
0000c4  e3800008          ORR      r0,r0,#8
0000c8  e5860008          STR      r0,[r6,#8]
;;;890    
;;;891        u32TimeOut = 0xFFFFFF;
0000cc  e3e014ff          MVN      r1,#0xff000000
;;;892    
;;;893        for(i = 0; i < 64; i=i+4) {
0000d0  e3a00000          MOV      r0,#0
                  |L20.212|
;;;894            while((inp32(REG_JMCR) & QT_BUSY) & u32TimeOut)
0000d4  e5963000          LDR      r3,[r6,#0]
0000d8  e0033001          AND      r3,r3,r1
0000dc  e3130004          TST      r3,#4
0000e0  12411001          SUBNE    r1,r1,#1
0000e4  1afffffa          BNE      |L20.212|
;;;895                u32TimeOut--;
;;;896    
;;;897            if(!u32TimeOut)
0000e8  e3510000          CMP      r1,#0
0000ec  0a000016          BEQ      |L20.332|
;;;898                return E_JPEG_TIMEOUT;
;;;899    
;;;900            u32value = puQTable2[i] | (puQTable2[i+1]<<8) | (puQTable2[i+2]<<16) | (puQTable2[i+3]<<24);
0000f0  e0823000          ADD      r3,r2,r0
0000f4  e7d2c000          LDRB     r12,[r2,r0]
0000f8  e5d34001          LDRB     r4,[r3,#1]
0000fc  e18cc404          ORR      r12,r12,r4,LSL #8
000100  e5d34002          LDRB     r4,[r3,#2]
000104  e5d33003          LDRB     r3,[r3,#3]
000108  e18cc804          ORR      r12,r12,r4,LSL #16
00010c  e18c3c03          ORR      r3,r12,r3,LSL #24
;;;901            outp32((REG_JQTAB2 + i),u32value);
000110  e080c006          ADD      r12,r0,r6
000114  e58c3180          STR      r3,[r12,#0x180]
000118  e2800004          ADD      r0,r0,#4
00011c  e3500040          CMP      r0,#0x40              ;893
;;;902        }
;;;903    
;;;904        u32TimeOut = 0xFFFFFF;
000120  a3e004ff          MVNGE    r0,#0xff000000
000124  baffffea          BLT      |L20.212|
                  |L20.296|
;;;905        while((inp32(REG_JMCR) & QT_BUSY) & u32TimeOut)
000128  e5961000          LDR      r1,[r6,#0]
00012c  e0011000          AND      r1,r1,r0
000130  e3110004          TST      r1,#4
000134  12400001          SUBNE    r0,r0,#1
000138  1afffffa          BNE      |L20.296|
;;;906            u32TimeOut--;
;;;907    
;;;908        if(!u32TimeOut)
00013c  e3500000          CMP      r0,#0
000140  0a000001          BEQ      |L20.332|
                  |L20.324|
;;;909            return E_JPEG_TIMEOUT;
;;;910        else
;;;911            return E_SUCCESS;
000144  e3a00001          MOV      r0,#1
;;;912    
;;;913    }
000148  e8bd81f0          POP      {r4-r8,pc}
                  |L20.332|
00014c  e3a00003          MOV      r0,#3                 ;909
000150  e8bd81f0          POP      {r4-r8,pc}
;;;914    
                          ENDP

                  |L20.340|
                          DCD      0xb000a000

                          AREA ||i.jpegSetScalingFactor||, CODE, READONLY, ALIGN=2

                  jpegSetScalingFactor PROC
;;;608    
;;;609    INT jpegSetScalingFactor(
000000  e92d4030          PUSH     {r4,r5,lr}
;;;610        UINT8   u8Mode,         //Up / Down Scaling
;;;611        UINT16  u16FactorH,     //Vertical Scaling Factor
;;;612        UINT16  u16FactorW      //Horizontal Scaling Factor
;;;613    )
;;;614    {
;;;615        if(u8Mode == JPEG_ENC_UPSCALE_MODE) {
;;;616            JPEG_DEC_DISABLE_DOWNSCALING();
000004  e59f30cc          LDR      r3,|L21.216|
000008  e3500000          CMP      r0,#0                 ;615
00000c  0a00000a          BEQ      |L21.60|
;;;617            JPEG_ENC_ENABLE_UPSCALING();
;;;618        } else if(u8Mode == JPEG_DEC_PACKET_DOWNSCALE_MODE || u8Mode == JPEG_DEC_PLANAR_DOWNSCALE_MODE || u8Mode == JPEG_ENC_PLANAR_PRIMARY_DOWNSCALE_MODE) {
000010  e3500001          CMP      r0,#1
000014  13500002          CMPNE    r0,#2
000018  13500003          CMPNE    r0,#3
;;;619            JPEG_DEC_ENABLE_DOWNSCALING();
00001c  e3a05902          MOV      r5,#0x8000
;;;620            JPEG_ENC_DISABLE_UPSCALING();
;;;621        } else if(u8Mode == JPEG_ENC_PLANAR_THUMBNAIL_DOWNSCALE_MODE) {
;;;622            outp32(REG_JTSCALD, TSX_ON);
;;;623        }
;;;624    
;;;625        if(u8Mode == JPEG_DEC_PLANAR_DOWNSCALE_MODE || u8Mode == JPEG_ENC_PLANAR_PRIMARY_DOWNSCALE_MODE)
;;;626            outp32(REG_JPSCALD,  (inp32(REG_JPSCALD) & ~(PSCALX_F | PSCALY_F)) | ((u16FactorW & 0x1F) << 8) | (u16FactorH & 0x1F));
000020  e202401f          AND      r4,r2,#0x1f
000024  e201c01f          AND      r12,r1,#0x1f
000028  0a000009          BEQ      |L21.84|
00002c  e3500004          CMP      r0,#4                 ;621
000030  0583505c          STREQ    r5,[r3,#0x5c]         ;622
000034  0a000019          BEQ      |L21.160|
000038  ea00000e          B        |L21.120|
                  |L21.60|
00003c  e3e00902          MVN      r0,#0x8000            ;616
000040  e5830058          STR      r0,[r3,#0x58]         ;616
000044  e5930054          LDR      r0,[r3,#0x54]         ;617
000048  e3800040          ORR      r0,r0,#0x40           ;617
00004c  e5830054          STR      r0,[r3,#0x54]         ;617
000050  ea000008          B        |L21.120|
                  |L21.84|
000054  e5835058          STR      r5,[r3,#0x58]         ;619
000058  e5935054          LDR      r5,[r3,#0x54]         ;620
00005c  e3c55040          BIC      r5,r5,#0x40           ;620
000060  e5835054          STR      r5,[r3,#0x54]         ;620
000064  e3500002          CMP      r0,#2                 ;625
000068  13500003          CMPNE    r0,#3                 ;625
00006c  0a000012          BEQ      |L21.188|
;;;627    
;;;628        else if(u8Mode == JPEG_ENC_PLANAR_THUMBNAIL_DOWNSCALE_MODE)
000070  e3500004          CMP      r0,#4
000074  0a000009          BEQ      |L21.160|
                  |L21.120|
;;;629            outp32(REG_JTSCALD,  (inp32(REG_JTSCALD) & ~(TSCALX_F | TSCALY_F)) | ((u16FactorW & 0x1F) << 8) | (u16FactorH & 0x1F));
;;;630        else {
;;;631            outp32(REG_JPSCALD, inp32(REG_JPSCALD) & ~(PSCALX_F | PSCALY_F));
000078  e5930058          LDR      r0,[r3,#0x58]
00007c  e3c00c1f          BIC      r0,r0,#0x1f00
000080  e3c0003f          BIC      r0,r0,#0x3f
000084  e5830058          STR      r0,[r3,#0x58]
;;;632            outp32(REG_JUPRAT, ((u16FactorH & 0x3FFF) << 16) | (u16FactorW & 0x3FFF));
000088  e3c20903          BIC      r0,r2,#0xc000
00008c  e3c11903          BIC      r1,r1,#0xc000
000090  e1800801          ORR      r0,r0,r1,LSL #16
000094  e58300b0          STR      r0,[r3,#0xb0]
                  |L21.152|
;;;633        }
;;;634        return E_SUCCESS;
000098  e3a00001          MOV      r0,#1
;;;635    }
00009c  e8bd8030          POP      {r4,r5,pc}
                  |L21.160|
0000a0  e593005c          LDR      r0,[r3,#0x5c]         ;629
0000a4  e1a007a0          LSR      r0,r0,#15             ;629
0000a8  e1a00780          LSL      r0,r0,#15             ;629
0000ac  e1800404          ORR      r0,r0,r4,LSL #8       ;629
0000b0  e180000c          ORR      r0,r0,r12             ;629
0000b4  e583005c          STR      r0,[r3,#0x5c]         ;629
0000b8  eafffff6          B        |L21.152|
                  |L21.188|
0000bc  e5930058          LDR      r0,[r3,#0x58]         ;626
0000c0  e3c00c1f          BIC      r0,r0,#0x1f00         ;626
0000c4  e3c0003f          BIC      r0,r0,#0x3f           ;626
0000c8  e1800404          ORR      r0,r0,r4,LSL #8       ;626
0000cc  e180000c          ORR      r0,r0,r12             ;626
0000d0  e5830058          STR      r0,[r3,#0x58]         ;626
0000d4  eaffffef          B        |L21.152|
;;;636    
                          ENDP

                  |L21.216|
                          DCD      0xb000a000

                          AREA ||i.jpegSetWindowDecode||, CODE, READONLY, ALIGN=2

                  jpegSetWindowDecode PROC
;;;679    
;;;680    INT jpegSetWindowDecode(
000000  e92d4010          PUSH     {r4,lr}
;;;681        UINT16  u16StartMCUX,   //Start X MCU
;;;682        UINT16  u16StartMCUY,   //Horizontal Scaling Factor
;;;683        UINT16  u16EndMCUX,     //Vertical Scaling Factor
;;;684        UINT16  u16EndMCUY,     //Horizontal Scaling Factor
;;;685        UINT32  u32Stride       //Decode Output Stride
;;;686    )
;;;687    {
;;;688        if(u16StartMCUX >= u16EndMCUX || u16StartMCUY >= u16EndMCUY)
000004  e1500002          CMP      r0,r2
000008  e59dc008          LDR      r12,[sp,#8]
00000c  31510003          CMPCC    r1,r3
;;;689            return E_JPEG_INVALID_PARAM;
000010  23a00002          MOVCS    r0,#2
;;;690    
;;;691        outp32(REG_JWINDEC0, u16StartMCUY << 16 | u16StartMCUX);
;;;692        outp32(REG_JWINDEC1, u16EndMCUY << 16 | u16EndMCUX);
;;;693        outp32(REG_JWINDEC2, u32Stride);
;;;694        outp32(REG_JMCR, WIN_DEC);
;;;695        sysprintf("\tJWINDEC0 0x%X\n", inp32(REG_JWINDEC0));
;;;696        sysprintf("\tJWINDEC1 0x%X\n", inp32(REG_JWINDEC1));
;;;697        sysprintf("\tJWINDEC2 0x%X\n", inp32(REG_JWINDEC2));
;;;698        return E_SUCCESS;
;;;699    }
000014  28bd8010          POPCS    {r4,pc}
000018  e1800801          ORR      r0,r0,r1,LSL #16      ;691
00001c  e59f4040          LDR      r4,|L22.100|
000020  e5840044          STR      r0,[r4,#0x44]         ;691
000024  e1820803          ORR      r0,r2,r3,LSL #16      ;692
000028  e5840048          STR      r0,[r4,#0x48]         ;692
00002c  e584c04c          STR      r12,[r4,#0x4c]        ;693
000030  e3a00040          MOV      r0,#0x40              ;694
000034  e5840000          STR      r0,[r4,#0]            ;694
000038  e5941044          LDR      r1,[r4,#0x44]         ;695
00003c  e28f0024          ADR      r0,|L22.104|
000040  ebfffffe          BL       sysprintf
000044  e5941048          LDR      r1,[r4,#0x48]         ;696
000048  e28f0028          ADR      r0,|L22.120|
00004c  ebfffffe          BL       sysprintf
000050  e594104c          LDR      r1,[r4,#0x4c]         ;697
000054  e28f002c          ADR      r0,|L22.136|
000058  ebfffffe          BL       sysprintf
00005c  e3a00001          MOV      r0,#1                 ;698
000060  e8bd8010          POP      {r4,pc}
;;;700    
                          ENDP

                  |L22.100|
                          DCD      0xb000a000
                  |L22.104|
000068  094a5749          DCB      "\tJWINDEC0 0x%X\n",0
00006c  4e444543
000070  30203078
000074  25580a00
                  |L22.120|
000078  094a5749          DCB      "\tJWINDEC1 0x%X\n",0
00007c  4e444543
000080  31203078
000084  25580a00
                  |L22.136|
000088  094a5749          DCB      "\tJWINDEC2 0x%X\n",0
00008c  4e444543
000090  32203078
000094  25580a00

                          AREA ||i.jpegWait||, CODE, READONLY, ALIGN=2

                  jpegWait PROC
;;;831      */
;;;832    INT jpegWait(void)
000000  e59f001c          LDR      r0,|L23.36|
                  |L23.4|
;;;833    {
;;;834        while(1) {
;;;835            if(g_bWait == FALSE)
000004  e5d01000          LDRB     r1,[r0,#0]  ; g_bWait
000008  e3510000          CMP      r1,#0
00000c  1afffffc          BNE      |L23.4|
;;;836                break;
;;;837        }
;;;838    
;;;839        if(g_jpegError)
000010  e5d00001          LDRB     r0,[r0,#1]  ; g_jpegError
000014  e3500000          CMP      r0,#0
;;;840            return E_FAIL;
000018  13a00000          MOVNE    r0,#0
;;;841    
;;;842        return E_SUCCESS;
00001c  03a00001          MOVEQ    r0,#1
;;;843    }
000020  e12fff1e          BX       lr
;;;844    
                          ENDP

                  |L23.36|
                          DCD      ||.data||

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  jpegInfo
                          %        36

                          AREA ||.data||, DATA, ALIGN=2

                  g_bWait
000000  00                DCB      0x00
                  g_jpegError
000001  00                DCB      0x00
                  g_bScale
000002  00                DCB      0x00
                  g_OutputWait
000003  00                DCB      0x00
                  g_InputWait
000004  00                DCB      0x00
                  g_u32WindowDec
000005  00                DCB      0x00
                  g_bEncThumbnailDownScale
000006  00                DCB      0x00
                  g_bEncPrimaryDownScale
000007  00                DCB      0x00
                  g_u16BufferSize
000008  0000              DCB      0x00,0x00
                  g_u16ReserveSize
00000a  0000              DCB      0x00,0x00
                  g_u32EncRotate
                          DCD      0x00000000
                  pfnJpegDecodeComplete
                          DCD      0x00000000
                  pfnJpegDecodeError
                          DCD      0x00000000
                  pfnJpegEncodeComplete
                          DCD      0x00000000
                  pfnJpegHeaderDecode
                          DCD      0x00000000
                  pfnJpegDecInputWait
                          DCD      0x00000000
                  pfnJpegDecOutputWait
                          DCD      0x00000000
                  g_u32Stride
                          DCD      0x00000000
                  g_u32ScaleWidth
                          DCD      0x00000000
                  g_u32ScaleHeight
                          DCD      0x00000000
                  g_u32OpMode
                          DCD      0x00000000
                  g_u32BufferCount
                          DCD      0x00000000
                  g_u32DecInputWaitAddr
                          DCD      0x00000000
                  g_u32OutputFormat
                          DCD      0x00000000
                  g_u32windowSizeX
                          DCD      0x00000000
                  g_u32windowSizeY
                          DCD      0x00000000
                  g_au8QTable0
00004c  06040405          DCB      0x06,0x04,0x04,0x05
000050  04040605          DCB      0x04,0x04,0x06,0x05
000054  05050606          DCB      0x05,0x05,0x06,0x06
000058  0607080e          DCB      0x06,0x07,0x08,0x0e
00005c  09080808          DCB      0x09,0x08,0x08,0x08
000060  08110c0d          DCB      0x08,0x11,0x0c,0x0d
000064  0a0e1411          DCB      0x0a,0x0e,0x14,0x11
000068  15141311          DCB      0x15,0x14,0x13,0x11
00006c  13131618          DCB      0x13,0x13,0x16,0x18
000070  1f1a1617          DCB      0x1f,0x1a,0x16,0x17
000074  1d171313          DCB      0x1d,0x17,0x13,0x13
000078  1b251b1d          DCB      0x1b,0x25,0x1b,0x1d
00007c  20212323          DCB      0x20,0x21,0x23,0x23
000080  23151a26          DCB      0x23,0x15,0x1a,0x26
000084  29262228          DCB      0x29,0x26,0x22,0x28
000088  1f222321          DCB      0x1f,0x22,0x23,0x21
                  g_au8QTable1
00008c  06060608          DCB      0x06,0x06,0x06,0x08
000090  07081009          DCB      0x07,0x08,0x10,0x09
000094  09102116          DCB      0x09,0x10,0x21,0x16
000098  13162121          DCB      0x13,0x16,0x21,0x21
00009c  21212121          DCB      0x21,0x21,0x21,0x21
0000a0  21212121          DCB      0x21,0x21,0x21,0x21
0000a4  21212121          DCB      0x21,0x21,0x21,0x21
0000a8  21212121          DCB      0x21,0x21,0x21,0x21
0000ac  21212121          DCB      0x21,0x21,0x21,0x21
0000b0  21212121          DCB      0x21,0x21,0x21,0x21
0000b4  21212121          DCB      0x21,0x21,0x21,0x21
0000b8  21212121          DCB      0x21,0x21,0x21,0x21
0000bc  21212121          DCB      0x21,0x21,0x21,0x21
0000c0  21212121          DCB      0x21,0x21,0x21,0x21
0000c4  21212121          DCB      0x21,0x21,0x21,0x21
0000c8  21212121          DCB      0x21,0x21,0x21,0x21

                          AREA ||area_number.28||, DATA, ALIGN=0

                          EXPORTAS ||area_number.28||, ||.data||
                  g_au8QTable2
000000  03030303          DCB      0x03,0x03,0x03,0x03
000004  03030303          DCB      0x03,0x03,0x03,0x03
000008  03030303          DCB      0x03,0x03,0x03,0x03
00000c  03030303          DCB      0x03,0x03,0x03,0x03
000010  03030303          DCB      0x03,0x03,0x03,0x03
000014  03030303          DCB      0x03,0x03,0x03,0x03
000018  03030303          DCB      0x03,0x03,0x03,0x03
00001c  03030303          DCB      0x03,0x03,0x03,0x03
000020  03030303          DCB      0x03,0x03,0x03,0x03
000024  03030303          DCB      0x03,0x03,0x03,0x03
000028  03030303          DCB      0x03,0x03,0x03,0x03
00002c  03030303          DCB      0x03,0x03,0x03,0x03
000030  03030303          DCB      0x03,0x03,0x03,0x03
000034  03030303          DCB      0x03,0x03,0x03,0x03
000038  03030303          DCB      0x03,0x03,0x03,0x03
00003c  03030303          DCB      0x03,0x03,0x03,0x03
